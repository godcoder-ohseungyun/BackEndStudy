

# [RestAPI] REST API

---

í”„ë¡œì íŠ¸ì˜ ê·œëª¨ê°€ ì»¤ì§ì— ë”°ë¼ `ì„œë²„ì˜ í™•ì¥ ë° ìŠ¤ì¼€ì¼ì•„ì›ƒ`ì„ í•˜ê±°ë‚˜ ì—¬ëŸ¬ ì„œë²„ë¥¼ ë‘ê³  ì„œë²„ê°„ í†µì‹ ì„ í†µí•´ ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.

> ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œ ë‚˜ëŠ” ë¨¸ì‹ ëŸ¬ë‹ í´ëŸ¬ìŠ¤í„°ë§ì„ ë‹´ë‹¹í•  ì„œë²„ì™€ WASë¥¼ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ê³ ìí•œë‹¤.



ë˜ëŠ” ê¸°ì¡´ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œë„ ë™ì‘í•˜ë„ë¡ `ë©€í‹° í”Œë«í¼ìœ¼ë¡œ í™•ì¥`í•œë‹¤.



ì¦‰, `ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ` ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ì•„ì•¼í•œë‹¤.

> ì—¬ê¸°ì„œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©ìë¼ê¸° ë³´ë‹¨ `ìš”ì²­ì„ ë³´ë‚´ëŠ” ìª½`ì´ë‹¤.
>
> ex) í”„ë¡ íŠ¸ì„œë²„,ë¸Œë¼ìš°ì €,ë°±ì—”ë“œ ì„œë²„
>
> ì„œë²„ê°„ í†µì‹ ì—ì„œë§Œ í†µìš©ë˜ëŠ”ê²ƒì€ ì•„ë‹ˆê³  `ëª¨ë“  ê¸°ê¸°ê°„ í†µì‹ ì— ì ìš©`ë ìˆ˜ìˆë‹¤.



**ì„œë¡œ ë‹¤ë¥¸ ì„œë²„ë“¤ì€ ì„œë²„ë¥¼ êµ¬ì„±í•˜ëŠ” ì–¸ì–´ë„ ê¸°ëŠ¥ë„ ë‹¤ë¥¼ê²ƒì´ë‹¤.**

ìš”ì²­ìëŠ” ê°ê°ì˜ ì„œë²„ë¥¼ ì˜ ëª¨ë¥´ë”ë¼ë„ **`ì–´ë–¤ ê³µí†µì˜ ê·œì¹™`**ì´ ì¡´ì¬í•˜ê³  ì´ ê·œì¹™ì„ ì´í•´í•œë‹¤ë©´ ê° ì„œë²„ë¥¼ ì¢€ë” ì‰½ê²Œ ì´ìš©í• ìˆ˜ìˆë‹¤ë©´ í¸ë¦¬í•  ê²ƒì´ë‹¤.



ì´ ì–´ë– í•œ ê·œì¹™ì„ `REST` ë¼ê³  í•˜ë©°



ì´ `REST`ë¥¼ ì˜ ì§€ì¼œì„œ `RESTFUL`í•˜ê²Œ ê°œë°œëœ ì„œë²„ë¥¼ `RESTAPI`ë¼ê³  ë¶€ë¥¸ë‹¤.



ì¦‰, ì„œë²„ì˜ ê°œë°œì— ìˆì–´ì„œ  RestAPIëŠ” í•„ìˆ˜ì ì¸ ìš”ì†Œì´ë‹¤.

> RestAPI ë§ê³ ë„ Graphqlì´ë¼ëŠ” í˜•ì‹ë„ ìˆì§€ë§Œ ê·¸ê±´ ì¶”í›„ì— ë‹¤ë£¨ë„ë¡ í•˜ê² ë‹¤.



 

### **ìš©ì–´ì‚¬ì „**

**Interface:** ê´‘ë²”ìœ„í•œ ê°œë…, ì–´ë–¤ ê¸°ëŠ¥ì„ í™œìš©í•˜ê¸° ìœ„í•œ ì œì–´ì‹œìŠ¤í…œ

> ì¸í„°í˜ì´ìŠ¤ëŠ” ì„œë¡œ ë‹¤ë¥¸ ë‘ ê°œì˜ ì‹œìŠ¤í…œ, ì¥ì¹˜ ì‚¬ì´ì—ì„œ ì •ë³´ë‚˜ ì‹ í˜¸ë¥¼ ì£¼ê³ ë°›ëŠ” ê²½ìš°ì˜ ì ‘ì ì´ë‚˜ ê²½ê³„ë©´ì´ë‹¤.
>
> í•˜ë“œì›¨ì–´ ì¸í„°í˜ì´ìŠ¤: í•˜ë“œì›¨ì–´ ê°„ì˜ ìƒí˜¸ì‘ìš©
>
> ì†Œí”„íŠ¸ì›¨ì–´ ì¸í„°í˜ì´ìŠ¤: ì†Œí”„íŠ¸ì›¨ì–´ ê°„ì˜ ìƒí˜¸ì‘ìš©
>
> ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤: ì‚¬ëŒê³¼ ê¸°ê³„ê°„ì˜ ìƒí˜¸ì‘ìš©

**API(Application Programming Interface):** ì‘ìš©í”„ë¡œê·¸ë¨ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì‰½ê²Œ ì œì–´ ë° ì‚¬ìš© í• ìˆ˜ìˆê²Œ ë§Œë“  ì¸í„°í˜ì´ìŠ¤

> ì‚¬ìš©í•˜ê³ ìí•˜ëŠ” í”„ë¡œê·¸ë¨ì˜ ë‚´ë¶€ë¥¼ ëª°ë¼ë„ ì‰½ê²Œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤
>
> APIëŠ” ë¦¬ëª¨ì»¨ê³¼ ì ì›ì²˜ëŸ¼ `ì• í”Œë¦¬ì¼€ì´ì…˜`ê³¼ `ìš´ì˜ì²´ì œ` ê·¸ë¦¬ê³  `ì• í”Œë¦¬ì¼€ì´ì…˜`ê³¼ `í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥` ì‚¬ì´ì˜ 'ìƒí˜¸ ì‘ìš©'ì„ ë•ëŠ”ë‹¤

 



## RestAPI

**ê°œìš”**

ì¸í„°ë„·ìƒì—ì„œ ê¸°ê³„ë“¤ì€ HTTPë¥¼ í†µí•´ í†µì‹ ì„ ì£¼ê³ ë°›ëŠ”ë‹¤.

> request & response
>
> http message bodyì— ë°ì´í„°ë¥¼ ë‹´ì•„ ì£¼ê³ ë°›ëŠ”ë‹¤. ex) json , xml ë°ì´í„° í¬ë©§ ì´ìš©



ì´ë•Œ `ì›¹ì—ì„œ ì¼ì–´ë‚˜ëŠ” ëª¨ë“  ê¸°ê³„ê°„ í†µì‹ ì— ê³µí†µì ì¸ ê·œì¹™ì„ ì •í•´ë‘”ë‹¤ë©´ ë” ëª…í™•í•˜ê³  í™•ì‹¤í•˜ê²Œ ìƒí˜¸ì‘ìš© í• ìˆ˜ìˆì„ê²ƒ`ì´ë‹¤.

 

**ë¨¼ì € Restë€?**

ì¸í„°ë„·ìƒì—ì„œ ìš”ì²­ìëŠ” HTTPì™€ URIë¥¼ ì´ìš©í•´, ë‹¤ë¥¸ ì»´í“¨í„°ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  í•´ë‹¹ ì»´í“¨í„°ë¡œë¶€í„° ì‘ë‹µì„ ë°›ëŠ”ë‹¤.

![image](https://user-images.githubusercontent.com/68331041/147249019-19ea9dd3-01b3-42c9-8aec-85696a366163.png)

> êµ¬ê¸€ ì„œë²„ì˜ ê²Œì‹œë¬¼ post ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼



ì´ë•Œ í•´ë‹¹ ê¸°ê¸° ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ëŠ” **HTTP URI**ë¥¼ í†µí•´ ëª…ì‹œëœë‹¤.

ì´ URIë¥¼ í†µí•´ ì ‘ê·¼í•œ ë¦¬ì†ŒìŠ¤ì˜ ë°ì´í„°ë¥¼ CRUDí•˜ì—¬ ì²˜ë¦¬í• ìˆ˜ìˆì–´ì•¼í•˜ëŠ”ë° ì´ë•Œ **HTTP Method**ë¥¼ ì ê·¹ í™œìš©í•˜ì—¬ ì²˜ë¦¬í•˜ë„ë¡ ë˜ì–´ìˆë‹¤.

ì´ëŸ° ì¼ë ¨ì˜ ì•½ì†ì„ **Rest**ë¼ê³  í•œë‹¤.



**ì¦‰ Restë€**

1. HTTP URI(Uniform Resource Identifier)ë¥¼ í†µí•´ ìì›(Resource)ì„ ëª…ì‹œí•˜ê³ ,
2. HTTP Method(POST, GET, PUT, DELETE)ë¥¼ í†µí•´
3. í•´ë‹¹ ìì›(URI)ì— ëŒ€í•œ CRUD Operationì„ ì ìš©í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

```
Create : ë°ì´í„° ìƒì„±(POST)
Read : ë°ì´í„° ì¡°íšŒ(GET)
Update : ë°ì´í„° ìˆ˜ì •(PUT)
Delete : ë°ì´í„° ì‚­ì œ(DELETE)
```



**RESTì˜ íŠ¹ì§•**

**Server-Client(ì„œë²„-í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡°)**

> ìì›ì´ ìˆëŠ” ìª½ì´ Server, ìì›ì„ ìš”ì²­í•˜ëŠ” ìª½ì´ Clientê°€ ëœë‹¤.
>
> > `REST Server: `APIë¥¼ ì œê³µí•˜ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬ ë° ì €ì¥ì„ ì±…ì„ì§„ë‹¤.
> >
> > `Client:` ì‚¬ìš©ì ì¸ì¦ì´ë‚˜ context(ì„¸ì…˜, ë¡œê·¸ì¸ ì •ë³´) ë“±ì„ ì§ì ‘ ê´€ë¦¬í•˜ê³  ì±…ì„ì§„ë‹¤.
>
> 
>
> ì„œë¡œ ê°„ `ì˜ì¡´ì„±ì´ ì¤„ì–´ë“ ë‹¤.`



**Stateless(ë¬´ìƒíƒœ)**

> HTTP í”„ë¡œí† ì½œì€ Stateless Protocolì´ë¯€ë¡œ REST ì—­ì‹œ `ë¬´ìƒíƒœì„±`ì„ ê°–ëŠ”ë‹¤.
>
> ServerëŠ” `ê°ê°ì˜ ìš”ì²­ì„ ì™„ì „íˆ ë³„ê°œ`ì˜ ê²ƒìœ¼ë¡œ ì¸ì‹í•˜ê³  ì²˜ë¦¬í•œë‹¤.



**Cacheable(ìºì‹œ ì²˜ë¦¬ ê°€ëŠ¥)**

> ì›¹ í‘œì¤€ HTTP í”„ë¡œí† ì½œì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ `ì›¹ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê¸°ì¡´ì˜ ì¸í”„ë¼ë¥¼ ê·¸ëŒ€ë¡œ í™œìš©`í•  ìˆ˜ ìˆë‹¤.
>
> ìºì‹œ ì‚¬ìš©ì„ í†µí•´ ì‘ë‹µì‹œê°„ì´ ë¹¨ë¼ì§€ê³  REST Server íŠ¸ëœì­ì…˜ì´ ë°œìƒí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì „ì²´ ì‘ë‹µì‹œê°„, ì„±ëŠ¥, ì„œë²„ì˜ ìì› ì´ìš©ë¥ ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.



**Layered System(ê³„ì¸µí™”)**

>ClientëŠ” REST API Serverë§Œ í˜¸ì¶œí•œë‹¤.
>
>`REST ServerëŠ” ë‹¤ì¤‘ ê³„ì¸µ`ìœ¼ë¡œ êµ¬ì„±ë  ìˆ˜ ìˆë‹¤.
>
>> ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì•”í˜¸í™”, ë³´ì•ˆ, ì¸ì¦ì„ ê³„ì¸µí™” í•˜ì—¬ ìœ ì—°í•˜ê²Œ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤.



**Uniform Interface(ì¸í„°í˜ì´ìŠ¤ ì¼ê´€ì„±)**

> URIë¡œ ì§€ì •í•œ Resourceì— ëŒ€í•œ ì¡°ì‘ì„ í†µì¼ë˜ê³  í•œì •ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¡œ ìˆ˜í–‰í•œë‹¤.
>
> `HTTP í‘œì¤€ í”„ë¡œí† ì½œì— ë”°ë¥´ëŠ” ëª¨ë“  í”Œë«í¼ì—ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥`í•˜ë‹¤.



### ***RESTê°€ í•„ìš”í•œ ì´ìœ **



ë‹¤ì–‘í•œ ê¸°ê¸°ì˜ ë“±ì¥ê³¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë¶„ì‚°ê³¼ í†µí•©ì— ë”°ë¼ **ê° ê¸°ê¸°ê°„ ì¢…ë¥˜ì— ìƒê´€ì—†ì´ í†µì‹ í• ìˆ˜ìˆì–´ì•¼í•œë‹¤.**

**ë‹¤ì–‘í•œ ê¸°ê¸°ê°€ ì„œë¹„ìŠ¤ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê³µí†µëœ ê·œì¹™ìœ¼ë¡œ ì„œë¡œ í†µì‹ **í•˜ë„ë¡ í•˜ê¸°ìœ„í•´ RESTê°€ í•„ìš”í•˜ë‹¤.

 



## ê·¸ëŸ¼ RestAPIë€?



**RESTì˜ ì›ë¦¬ë¥¼ ë”°ë¼ RESTFULí•˜ê²Œ ê°œë°œëœ ì„œë¹„ìŠ¤ API**

+ ë§ì€ ì—…ì²´ë“¤ì´ Rest APIë¥¼ ì œê³µí•œë‹¤.

> OpenAPI ë“±

 

**ì¦‰ Rest APIë€**



**`RESTì›ë¦¬ì— ë”°ë¼ URIë¡œ ë¦¬ì†ŒìŠ¤ êµ¬ì¡°ë¥¼ í‘œí˜„í•˜ê³  + Http Methodë¥¼ ì´ìš©í•´ ìƒí˜¸ì‘ìš©í•˜ë„ë¡ ì„¤ê³„í•˜ëŠ” APIë¼ëŠ” ë§ì´ë‹¤.`**



ì˜ˆì‹œë¥¼ ë³´ì.

```
www.moviestar.com
```

ì´ì™€ ê°™ì€ ì˜í™”ì •ë³´ë¥¼ ì œê³µí•´ì£¼ëŠ” ì„œë²„ê°€ ìˆë‹¤.

ì´ ì„œë²„ì— ì˜í™” ëª©ë¡ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ë ¤ë©´

```
[GET] www.moviestar.com/movies
```

GET ë°©ì‹ìœ¼ë¡œ í•´ë‹¹ URIì— requestí•œë‹¤.

ë§Œì•½ ì˜í™”ë¥¼ ë“±ë¡í•˜ê³ ì‹¶ë‹¤ë©´

```
[POST] www.moviestar.com/movies
```

POST ë°©ì‹ìœ¼ë¡œ í•´ë‹¹ URIì— requestí•œë‹¤.

ì¦‰ ê°™ì€ URIë¼ë„ HTTP methodì— ë”°ë¼ í•˜ëŠ” ë™ì‘ì´ ë‹¬ë¼ì§„ë‹¤.

```
 Create : ë°ì´í„° ìƒì„±(POST)
 Read : ë°ì´í„° ì¡°íšŒ(GET)
 Update : ë°ì´í„° ìˆ˜ì •(PUT)
 Delete : ë°ì´í„° ì‚­ì œ(DELETE)
```

ë‹¤ìŒê³¼ ê°™ì€ 4ê°€ì§€ methodë¥¼ ì‚¬ìš©í•˜ì—¬ crudë¥¼ ì‹¤í˜„í•œë‹¤.

 

**URIë„ ì„¤ê³„í•˜ëŠ” ê·œì¹™ì´ ì¡´ì¬í•œë‹¤.**



**ë™ì‚¬ë¥¼ ì‚¬ìš©í•˜ì§€ë§ê²ƒ**

```
www.moviestar.com/getmovies
www.moviestar.com/postmovies
```

ë™ì‚¬ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì´ì²˜ëŸ¼ ë™ì‘ì— ë”°ë¼ ë§ì€ URIê°€ ìƒì„±ë˜ì–´ì•¼ í•˜ê³  ë³µì¡í•´ì§„ë‹¤.

 

**ì—˜ë¦¬ë¨¼íŠ¸ëŠ” IDë¡œ êµ¬ë¶„í•œë‹¤.**

```
[GET] www.moviestar.com/movies/1/actors/2
```

ìœ„ ìš”ì²­ì€ ì˜í™”ëª©ë¡ì˜ 1ë²ˆì§¸ ì˜í™”ì˜ 2ë²ˆì§¸ ë°°ìš° ì •ë³´ ì—´ëŒì„ ìš”ì²­í•œë‹¤ëŠ”ê²ƒì„ ì•Œìˆ˜ìˆë‹¤.

 

**URI ë§ˆì§€ë§‰ ë¬¸ìë¡œ ìŠ¬ë˜ì‹œ(/)ë¥¼ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.**



**í•˜ì´í”ˆ(-)ì€ URIê°€ë…ì„±ì„ ë†’ì´ëŠ”ë° ì‚¬ìš©**

> ë¶ˆê°€í”¼í•˜ê²Œ ê¸´ URIê²½ë¡œë¥¼ ì‚¬ìš©í•˜ê²Œ ëœë‹¤ë©´ í•˜ì´í”ˆì„ ì‚¬ìš©í•´ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.



**URI ê²½ë¡œì—ëŠ” ì†Œë¬¸ìê°€ ì í•©í•˜ë‹¤.**



**íŒŒì¼ í™•ì¥ìëŠ” URIì— í¬í•¨ì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤.**

~~~
http://restapi.example.com/members/soccer/345/photo.jpg (X)
~~~

> Accept headerë¥¼ ì‚¬ìš©í• ê²ƒ



**RESTì›ì¹™ì„ ì˜ ì§€ì¼œ RESTFULí•˜ê²Œ APIë¥¼ ì„¤ê³„í•´ì„œ REST APIë¥¼ ì˜ ì œê³µí•œë‹¤ë©´**

1. ê°™ì€ URIë¡œë„ HTTP methodë¥¼ ë‹¤ë¥´ê²Œí•˜ì—¬ ë‹¤ì–‘í•œ ë™ì‘ì„ ì‹¤í–‰ì‹œí‚¬ìˆ˜ìˆë‹¤.
2. ìš”ì²­ URI+method ë§Œìœ¼ë¡œë„ ì–´ë–¤ ìš”ì²­ì¸ì§€ ì§ê´€ì ìœ¼ë¡œ íŒŒì•…í• ìˆ˜ìˆë‹¤.
3. ì •í˜•í™”ëœ ì›ì¹™ìœ¼ë¡œ ì„¤ê³„í–ˆê¸° ë•Œë¬¸ì— **ë‹¤ë¥¸ íŒ€ì›ë“¤ê³¼ ê³µìœ í•˜ëŠ” ê²½ìš°ì—ë„ ì´í•´í•˜ê¸° ì‰½ë‹¤.**

 



## Reference

------

[ë…¸ë§ˆë“œì½”ë”](https://www.youtube.com/watch?v=4DxHX95Lq2U)

[ìƒí™œì½”ë”©](https://www.youtube.com/watch?v=PmY3dWcCxXI)







# [RestAPI] HTTP header

---

**RestAPIë¥¼ ê°œë°œí•˜ë©´ì„œ** í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µì„ ë‚´ë ¤ì¤„ë•Œ HTTP bodyì— jsonë§Œ ë‹´ì•„ì£¼ëŠ”ê²Œ ì•„ë‹ˆë¼

> ë¬¼ë¡  xml ë“± ë‹¤ì–‘í•œ ë°ì´í„° í¬ë©§ì„ ë‹´ê¸°ë„í•œë‹¤.



**ì‘ë‹µ HTTP headerë¥¼ ì§ì ‘ ë‹¤ë¤„ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤.**

> location uri ì •ë³´ë¼ë˜ê°€..



`Springì´ ì œê³µí•˜ëŠ” HttpEntityë¥¼ ì´ìš©í•´ HTTP headerë¥¼ ë‹¤ë£¨ê²Œ ë˜ë©´ì„œ, HTTP ìì²´ì˜ ìŠ¤í™ì— ëŒ€í•´ì„œ í•œë²ˆ ë” ì •ë¦¬í•  í•„ìš”ê°€ ìˆë‹¤ê³  ìƒê°í–ˆë‹¤.`



### **HTTP headerì—ëŠ” ì–´ë–¤ ì •ë³´ê°€ ì¡´ì¬í•˜ê³  ê° ì •ë³´ëŠ” ì–´ë–¤ê²ƒì„ ë‹´ê³ ìˆëŠ”ì§€ ì •ë¦¬í•˜ê³ ì í•œë‹¤.**



HTTPë‚˜ TCP,UDPë“± ë‹¤ì–‘í•œ í”„ë¡œí† ì½œì„ ì´í•´í•˜ë ¤ë©´ í•´ë‹¹ í”„ë¡œí† ì½œì˜ í—¤ë”ë§Œ íŒŒì•…í•˜ë©´ ëœë‹¤ê³  í•œë‹¤.

> `í”„ë¡œí† ì½œì˜ í—¤ë”ì˜ ë‚´ìš©`ì€ íŠ¹ì • í”„ë¡œí† ì½œì˜ ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ ë‹´ê³  ìˆëŠ” ìµœì†Œí•œì˜ ì •ë³´ì´ê¸° ë•Œë¬¸



### **request HTTP header**(ìš”ì²­ í—¤ë”)

> **Host** : ìš”ì²­í•˜ë ¤ëŠ” ì„œë²„ í˜¸ìŠ¤íŠ¸ ì´ë¦„ê³¼ í¬íŠ¸ë²ˆí˜¸
>
> 
>
> **User-agent** : í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ ì •ë³´ ex) Mozilla/4.0, Windows NT5.1
>
> > ì´ ì •ë³´ë¥¼ í†µí•´ì„œ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨(ë¸Œë¼ìš°ì €)ì— ë§ëŠ” ìµœì ì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ì¤„ ìˆ˜ ìˆë‹¤.
>
> 
>
> **Referer** : ë°”ë¡œ ì§ì „ì— ë¨¸ë¬¼ë €ë˜ ì›¹ ë§í¬ ì£¼ì†Œ(í•´ë‹¹ ìš”ì²­ì„ í•  ìˆ˜ ìˆê²Œëœ í˜ì´ì§€)
>
> 
>
> **Accept** : í´ë¼ì´ì–¸íŠ¸ê°€ ì²˜ë¦¬ ê°€ëŠ¥í•œ ë¯¸ë””ì–´ íƒ€ì… ì¢…ë¥˜ ë‚˜ì—´ ex) */* - ëª¨ë“  íƒ€ì… ì²˜ë¦¬ ê°€ëŠ¥, application/json - jsonë°ì´í„° ì²˜ë¦¬ ê°€ëŠ¥.
>
> 
>
> **Accept-charset** : í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì›ê°€ëŠ¥í•œ ë¬¸ìì—´ ì¸ì½”ë”© ë°©ì‹
>
> 
>
> **Accept-language** : í´ë¼ì´ì–¸íŠ¸ê°€ ì§€ì›ê°€ëŠ¥í•œ ì–¸ì–´ ë‚˜ì—´
>
> 
>
> **Accept-encoding** : í´ë¼ì´ì–¸íŠ¸ê°€ í•´ì„ê°€ëŠ¥í•œ ì••ì¶• ë°©ì‹ ì§€ì • ex) gzip, deflate
>
> > ì••ì¶•ì´ ë˜ì–´ìˆë‹¤ë©´ content-lengthì™€ content-encodingìœ¼ë¡œ ì••ì¶•ì„ í•´ì œí•œë‹¤.
>
> 
>
> **Content-location** : í•´ë‹¹ ê°œì²´ì˜ ì‹¤ì œ ìœ„ì¹˜
>
> 
>
> **Content-disposition** : ì‘ë‹µ ë©”ì„¸ì§€ë¥¼ ë¸Œë¼ìš°ì €ê°€ ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€ ì•Œë ¤ì¤Œ. ex) inline, attachment; filename='jeong-pro.xlsx'
>
> 
>
> **Content-Security-Policy** : ë‹¤ë¥¸ ì™¸ë¶€ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²½ìš° ì°¨ë‹¨í•  ë¦¬ì†ŒìŠ¤ì™€ ë¶ˆëŸ¬ì˜¬ ë¦¬ì†ŒìŠ¤ ëª…ì‹œ
>
> > ex) default-src https -> httpsë¡œë§Œ íŒŒì¼ì„ ê°€ì ¸ì˜´
> >
> > ex) default-src 'self' -> ìê¸° ë„ë©”ì¸ì—ì„œë§Œ ê°€ì ¸ì˜´
> >
> > ex) default-src 'none' -> ì™¸ë¶€íŒŒì¼ì€ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŒ
>
> 
>
> **If-Modified-Since** : ì—¬ê¸°ì— ì“°ì—¬ì§„ ì‹œê°„ ì´í›„ë¡œ ë³€ê²½ëœ ë¦¬ì†ŒìŠ¤ ì·¨ë“. í˜ì´ì§€ê°€ ìˆ˜ì •ë˜ì—ˆìœ¼ë©´ ìµœì‹  í˜ì´ì§€ë¡œ êµì²´í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
>
> 
>
> **Authorization** : ì¸ì¦ í† í°ì„ ì„œë²„ë¡œ ë³´ë‚¼ ë•Œ ì“°ì´ëŠ” í—¤ë”
>
> 
>
> **Origin** : ì„œë²„ë¡œ Post ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ìš”ì²­ì´ ì–´ëŠ ì£¼ì†Œì—ì„œ ì‹œì‘ë˜ì—ˆëŠ”ì§€ ë‚˜íƒ€ë‚´ëŠ” ê°’ ì´ ê°’ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¸ ì£¼ì†Œì™€ ë°›ëŠ” ì£¼ì†Œê°€ ë‹¤ë¥´ë©´ CORS ì—ëŸ¬ê°€ ë‚œë‹¤.
>
> 
>
> **Cookie** : ì¿ ê¸° ê°’ key-valueë¡œ í‘œí˜„ëœë‹¤. ex) attr1=value1; attr2=value2



### **response HTTP header(ì‘ë‹µí—¤ë”)**

> **Location** : 301, 302 ìƒíƒœì½”ë“œì¼ ë–„ë§Œ ë³¼ ìˆ˜ ìˆëŠ” í—¤ë”ë¡œ ì„œë²„ì˜ ì‘ë‹µì´ ë‹¤ë¥¸ ê³³ì— ìˆë‹¤ê³  ì•Œë ¤ì£¼ë©´ì„œ í•´ë‹¹ ìœ„ì¹˜(URI)ë¥¼ ì§€ì •í•œë‹¤.
>
> 
>
> **Server** : ì›¹ì„œë²„ì˜ ì¢…ë¥˜ ex) nginx
>
> 
>
> **Age** : max-age ì‹œê°„ë‚´ì—ì„œ ì–¼ë§ˆë‚˜ í˜ë €ëŠ”ì§€ ì´ˆ ë‹¨ìœ„ë¡œ ì•Œë ¤ì£¼ëŠ” ê°’
>
> 
>
> **Referrer-policy** : ì„œë²„ referrer ì •ì±…ì„ ì•Œë ¤ì£¼ëŠ” ê°’ ex) origin, no-referrer, unsafe-url
>
> 
>
> **WWW-Authenticate** : ì‚¬ìš©ì ì¸ì¦ì´ í•„ìš”í•œ ìì›ì„ ìš”êµ¬í•  ì‹œ, ì„œë²„ê°€ ì œê³µí•˜ëŠ” ì¸ì¦ ë°©ì‹
>
> 
>
> **Proxy-Authenticate** : ìš”ì²­í•œ ì„œë²„ê°€ í”„ë¡ì‹œ ì„œë²„ì¸ ê²½ìš° ìœ ì € ì¸ì¦ì„ ìœ„í•œ ê°’



### **common header(ê³µí†µí•´ë”)**

> **Date** : í˜„ì¬ì‹œê°„ (Sat, 23 Mat 2019 GMT)
>
> 
>
> **Pragma** : ìºì‹œì œì–´ (no-cache), HTTP/1.0ì—ì„œ ì“°ë˜ ê²ƒìœ¼ë¡œ HTTP/1.1ì—ì„œëŠ” Cache-Controlì´ ì“°ì¸ë‹¤.
>
> 
>
> **Cache-Control** : ìºì‹œ ì œì–´
>
> > \+ no-store : ìºì‹œë¥¼ ì €ì¥í•˜ì§€ ì•Šê² ë‹¤.
> >
> > \+ no-cache : ëª¨ë“  ìºì‹œë¥¼ ì“°ê¸° ì „ì— ì„œë²„ì— í•´ë‹¹ ìºì‹œë¥¼ ì‚¬ìš©í•´ë„ ë˜ëŠ”ì§€ í™•ì¸í•˜ê² ë‹¤.
> >
> > \+ must-revalidate : ë§Œë£Œëœ ìºì‹œë§Œ ì„œë²„ì— í™•ì¸í•˜ê² ë‹¤.
> >
> > \+ public : ê³µìœ  ìºì‹œì— ì €ì¥í•´ë„ ëœë‹¤.
> >
> > \+ private : 'ë¸Œë¼ìš°ì €' ê°™ì€ íŠ¹ì • ì‚¬ìš©ì í™˜ê²½ì—ë§Œ ì €ì¥í•˜ê² ë‹¤.
> >
> > \+ max-age : ìºì‹œì˜ ìœ íš¨ì‹œê°„ì„ ëª…ì‹œí•˜ê² ë‹¤.
>
> 
>
> **Transfer-Encoding** : body ë‚´ìš© ìì²´ ì••ì¶• ë°©ì‹ ì§€ì •
>
> > 'chunked'ë©´ ë³¸ë¬¸ì˜ ë‚´ìš©ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë˜ì–´ ê¸¸ì´ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë‚˜ëˆ ì„œ ë³´ë‚¸ë‹¤ëŠ” ì˜ë¯¸ë‹¤.
> >
> > ë³¸ë¬¸ì— ë°ì´í„° ê¸¸ì´ê°€ ë‚˜ì™€ì„œ ì•¼ê¸ˆì•¼ê¸ˆ ë¸Œë¼ìš°ì €ê°€ í•´ì„í•´ì„œ í™”ë©´ì— ë¿Œë ¤ì¤„ ë•Œ ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.
>
> 
>
> **Upgrade** : í”„ë¡œí† ì½œ ë³€ê²½ì‹œ ì‚¬ìš© ex) HTTP/2.0
>
> 
>
> **Via** : ì¤‘ê³„(í”„ë¡ì‹œ)ì„œë²„ì˜ ì´ë¦„, ë²„ì „, í˜¸ìŠ¤íŠ¸ëª…
>
> 
>
> **Content-Encoding** : ë³¸ë¬¸ì˜ ë¦¬ì†ŒìŠ¤ ì••ì¶• ë°©ì‹ (transfer-encodingì€ body ìì²´ì´ë¯€ë¡œ ë‹¤ë¦„)
>
> 
>
> **Content-type** : ë³¸ë¬¸ì˜ ë¯¸ë””ì–´ íƒ€ì…(MIME) ex) application/json, text/html
>
> 
>
> **Content-Length** : ë³¸ë¬¸ì˜ ê¸¸ì´
>
> 
>
> **Content-language** : ë³¸ë¬¸ì„ ì´í•´í•˜ëŠ”ë° ê°€ì¥ ì ì ˆí•œ ì–¸ì–´ ex) ko
>
> > í•œêµ­ì‚¬ì´íŠ¸ì—¬ë„ ë³¸ë¬¸ì„ ì´í•´í•˜ëŠ”ë° ì˜ì–´ê°€ ì œì¼ ì ì ˆí•˜ë©´ ì˜ì–´ë¡œ ì§€ì •ëœë‹¤.
>
> 
>
> **Expires** : ìì›ì˜ ë§Œë£Œ ì¼ì
>
> 
>
> **Allow** : ì‚¬ìš©ì´ ê°€ëŠ¥í•œ HTTP ë©”ì†Œë“œ ë°©ì‹ ex) GET, HEAD, POST
>
> 
>
> **Last-Modified** : ìµœê·¼ì— ìˆ˜ì •ëœ ë‚ ì§œ
>
> 
>
> **ETag** : ìºì‹œ ì—…ë°ì´íŠ¸ ì •ë³´ë¥¼ ìœ„í•œ ì„ì˜ì˜ ì‹ë³„ ìˆ«ì
>
> 
>
> **Connection** : í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì—°ê²° ë°©ì‹ ì„¤ì • HTTP/1.1ì€ kepp-alive ë¡œ ì—°ê²° ìœ ì§€í•˜ëŠ”ê²Œ ë””í´íŠ¸.



ì´ ë°–ì—ë„ ë‹¤ì–‘í•œ í—¤ë” ë°ì´í„°ê°€ ì¡´ì¬í•œë‹¤.





## Reference

---

https://rangken.github.io/blog/2015/http-headers/

https://jeong-pro.tistory.com/181





# [RestAPI] HTTP ìƒíƒœì½”ë“œ

---



**RestAPIë¥¼ ê°œë°œí• ë•Œ** ì‘ë‹µ HTTPë¥¼ ìƒì„±í•´ì£¼ëŠ”ê²ƒë„ ì¤‘ìš”í•˜ì§€ë§Œ `ì•Œë§ì€ ìƒíƒœì½”ë“œë¥¼ ì‘ë‹µ`í•´ì•¼í•œë‹¤. 



ìƒíƒœ ì½”ë“œì˜ ê¸°ëŠ¥ì€ ì •í•´ì ¸ ìˆë‹¤.



`ì•Œë§ì€ ìƒíƒœì½”ë“œë¥¼ íšŒì‹ í•¨ìœ¼ë¡œì¨ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë‹¤ìŒ ì‘ì—…ì„ ì•Œë¦´ìˆ˜ìˆë‹¤.`

> ì˜ˆë¥¼ ë“¤ë©´ ìƒíƒœ ì½”ë“œ `200`ì€ ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆë‹¤ëŠ” ë©”ì„¸ì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥ì„ ê°–ê³  ì´ê²ƒì„ ì´ìš©í•´ í´ë¼ì´ì–¸íŠ¸ì— ë‹¤ìŒ ì‘ì—…ì„ ì´ì–´ ë‚˜ê°€ë„ ì¢‹ë‹¤ëŠ” ì‹ í˜¸ì˜ ëª©ì ìœ¼ë¡œ ì“°ì¼ ìˆ˜ ìˆë‹¤.



**ì´ë ‡ê²Œ ì •í™•í•œ ì‘ë‹µì˜ ìƒíƒœì½”ë“œë§Œìœ¼ë¡œ ë§ì€ ì •ë³´ë¥¼ ì „ë‹¬í•  ìˆ˜ê°€ ìˆê¸° ë•Œë¬¸ì— ì‘ë‹µì˜ ìƒíƒœì½”ë“œ ê°’ì„ ëª…í™•íˆ ëŒë ¤ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.**



ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ìƒíƒœì½”ë“œë“¤ì„ ì •ë¦¬í•˜ê³ ì í•œë‹¤.

> `1XX ìƒíƒœ ì½”ë“œ`ëŠ” í”„ë¡œí† ì½œì„ êµì²´í•´ë„ ëœë‹¤ê±°ë‚˜ ê³„ì† ìš”ì²­ì„ ë³´ë‚´ë„ ëœë‹¤ê±°ë‚˜í•˜ëŠ” ì‹ì˜ ë‹¨ìˆœ ì •ë³´ì„±ì„ ë„ê³  ìˆëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•¨ìœ¼ë¡œ ì—í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí• ë•Œ ë§ˆì£¼ì¹  ì¼ì´ ê±°ì˜ ì—†ë‹¤. 



## 2xx (ì„±ê³µ)

+ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬í–ˆë‹¤ëŠ” ì˜ë¯¸.

> **200 ok** : í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬í–ˆë‹¤.
>
> > `ëª¨ë“  ì„±ê³µ ì²˜ë¦¬`ë¥¼ 200 ìœ¼ë¡œ ì²˜ë¦¬í•´ë„ ëœë‹¤.
> >
> > ìì„¸í•œ ì •ë³´ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„  ì•„ë˜ ìƒíƒœì½”ë“œë“¤ì„ ì‚¬ìš©í•œë‹¤.
>
> 
>
> **201 create** : í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬í–ˆê³  ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ê°€ ìƒê²¼ë‹¤.
>
> >`POST`, `PATCH` , `PUT` ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì— ì£¼ë¡œ ì‚¬ìš©ëœë‹¤.
>
> 
>
> **202 accepted** : í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì€ ì •ìƒì ì´ë‚˜, ì„œë²„ê°€ ì•„ì§ ìš”ì²­ì„ ì™„ë£Œí•˜ì§€ ëª»í–ˆë‹¤.
>
> > ë¡œì§ì´ `ë¹„ë™ê¸°`ë¡œ ìˆ˜í–‰ë ë•Œ ì‘ë‹µì— ì‚¬ìš©ëœë‹¤.
>
> 
>
> **204 No Content** : í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì€ ì •ìƒì ì´ë‹¤. í•˜ì§€ë§Œ ì»¨í…ì¸ ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
>
> > `DELETE`ìš”ì²­ì— ì‘ë‹µí•  ìˆ˜ ìˆë‹¤.



## 3xx (ë¦¬ë‹¤ì´ë ‰ì…˜ ì™„ë£Œ)

+ í´ë¼ì´ì–¸íŠ¸ëŠ” ìš”ì²­ì„ ë§ˆì¹˜ê¸° ìœ„í•´ ë¦¬ë‹¤ì´ë™ì…˜ ë“± ì¶”ê°€ ë™ì‘ì„ ì·¨í•´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸.
+ **ë¦¬ì†ŒìŠ¤ê°€ ë³€ê²½ í˜¹ì€ ì‚­ì œë˜ì–´ ë‹¤ë¥¸ URLì„ í†µí•´ì„œ ê·¸ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•´ì•¼í•˜ëŠ” ê²½ìš°** í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤€ë‹¤.

> **300 Multiple Choice:** ìš”ì²­ì— ëŒ€í•´ í•˜ë‚˜ ì´ìƒì˜ ë¦¬ì†ŒìŠ¤ê°€ ì¡´ì¬í•¨ì„ ì˜ë¯¸í•œë‹¤.
>
> > í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í• ìˆ˜ìˆëŠ” ë¦¬ì†ŒìŠ¤ ëª©ë¡ì„ ë°˜í™˜í•œë‹¤.
>
> 
>
> **301 Moved Permanetly: **  ìš”ì²­ ë¦¬ì†ŒìŠ¤ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì´ë™ë˜ì—ˆë‹¤ëŠ” ëœ»
>
> > ì„œë²„ëŠ”  HTTP í—¤ë”ì—  `Location` í•„ë“œì— í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ ìœ„ì¹˜ë¥¼ URLë¡œ ë‹´ì•„ì¤€ë‹¤.
> >
> > í´ë¼ì´ì–¸íŠ¸ëŠ”  HTTP í—¤ë”ì— ë“¤ì–´ìˆëŠ” `Location` í•„ë“œì— ë‹´ê¸´ URLë¡œ `ìë™ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜`í•©ë‹ˆë‹¤.
>
> 
>
> ê·¸ì™¸ `302`,`303` ë“±ì´ ìˆë‹¤.



## 4xx (ìš”ì²­ ì˜¤ë¥˜)

+ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ìœ íš¨í•˜ì§€ ì•Šì•„ ì„œë²„ê°€ í•´ë‹¹ ìš”ì²­ì„ ìˆ˜í–‰í•˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì˜ë¯¸.

> **400 Bad Request :** í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ìœ íš¨í•˜ì§€ ì•Šì•„ ë” ì´ìƒ ì‘ì—…ì„ ì§„í–‰í•˜ì§€ ì•ŠëŠ” ê²½ìš°
>
> > ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì‹œ ìš”ì²­ì— ëŒ€í•œ `ìœ íš¨ì„± ê²€ì‚¬`(ê²€ì¦ ë“±)ë¥¼ í•œ í›„ ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.
> >
> > ìœ íš¨í•˜ì§€ ì•Šì„ê²½ìš° `400` ìƒíƒœì½”ë“œë¡œ ìœ íš¨í•˜ì§€ ì•ŠìŒì„ ì‘ë‹µí•œë‹¤.
> >
> > 
> >
> > ì´ë•Œ ì–´ë– í•œ ì´ìœ ë¡œ ìœ íš¨í•˜ì§€ ì•Šì€ì§€ ì—ëŸ¬ ì´ìœ ë¥¼ ëª…ì‹œí•´ ì£¼ëŠ”ê²ƒì´ ì¢‹ë‹¤.
> >
> > ~~~JSON
> > HTTP/1.1 400 Bad Request
> > {
> >     "errors": [
> >         {
> >         "location": "body",
> >         "param": "name",
> >         "value": 123,
> >         "error": "TypeError",
> >         "msg": "must be String"
> >         }
> >     ]
> > }
> > ~~~
>
> 
>
> 
>
> **401 Unauthorized:** ì¸ì¦ëœ í´ë¼ì´ì–¸íŠ¸ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ì—†ëŠ” ê²½ìš°
>
> > ì„¸ì…˜ì´ë‚˜ JWTë¥¼ í†µí•œ `ë¡œê·¸ì¸ ìœ ì§€`ê°€ ì•ˆë˜ì—ˆì„ ê²½ìš° ì‚¬ìš©í•œë‹¤.
> >
> > ì¸ì¦ëœ ì‚¬ìš©ìê°€ ì•„ë‹Œê²½ìš° ì‘ë‹µí•œë‹¤.
>
> 
>
> **403 Forbidden:** í´ë¼ì´ì–¸íŠ¸ê°€ ê¶Œí•œì´ ì—†ê¸° ë•Œë¬¸ì— ì‘ì—…ì„ ì§„í–‰í•  ìˆ˜ ì—†ëŠ” ê²½ìš°
>
> > ê¶Œí•œì˜ ë¬¸ì œì´ë‹¤. `401ê³¼ í˜¼ëˆí•˜ì§€ ë§ì.`
> >
> > ë¡œê·¸ì¸ëœ ì¸ì¦ëœ ì‚¬ìš©ìì—¬ë„ ì¡°íšŒê¶Œí•œì´ ì—†ëŠ” ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•œë‹¤.
>
> 
>
> **404 Not Found:** í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ìì›ì´ ì¡´ì¬í•˜ì§€ ì•Šë‹¤.
>
> > ê²½ë¡œë‚˜ ìì›ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ê²½ìš° ì‚¬ìš©í•œë‹¤.
>
> 
>
> **405 Method Not Allowed:** í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ í—ˆìš©ë˜ì§€ ì•ŠëŠ” ë©”ì†Œë“œì¸ ê²½ìš°
>
> 
>
> **409 Conflict:** í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ì„œë²„ì˜ ìƒíƒœì™€ ì¶©ëŒì´ ë°œìƒí•œ ê²½ìš°
>
> > ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ìƒ ë¶ˆê°€ëŠ¥í•˜ê±°ë‚˜ ëª¨ìˆœì´ ìƒê¸°ëŠ” ê²½ìš° ì‚¬ìš©í•œë‹¤.
> >
> > > ì˜ˆë¥¼ë“¤ì–´ ì‚­ì œìš”ì²­ì‹œ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì´ë©´ ì‚­ì œê°€ ë¶ˆê°€ëŠ¥í•œ ë¡œì§ì´ ìˆëŠ” ê²½ìš°
> >
> > 
> >
> > ë˜ëŠ” `400, 401, 403, 404, 405` ìƒíƒœ ì½”ë“œì— ì†í•˜ê¸° ì• ë§¤í•œ ì˜¤ë¥˜ì˜ ìƒí™©ë“¤ì„ `409`ë¡œ ì‘ë‹µí•œë‹¤.
>
> 
>
> **429 Too Many Requests:** í´ë¼ì´ì–¸íŠ¸ê°€ ì¼ì • ì‹œê°„ ë™ì•ˆ ë„ˆë¬´ ë§ì€ ìš”ì²­ì„ ë³´ë‚¸ ê²½ìš°
>
> > Dos ê³µê²©ì„ 1ì°¨ì ìœ¼ë¡œ `ì–µì œ`í•˜ê±°ë‚˜, í•œ ì‚¬ìš©ìê°€ íŠ¸ë˜í”½ì„ ë§ì´ ì†Œëª¨í•  ê²½ìš° ë°œìƒì‹œí‚¬ìˆ˜ìˆë‹¤. 
> >
> > > ~~~json
> > > HTTP/1.1 429 Too Many Requests
> > > Retry-After: 3600
> > > ~~~
> > >
> > > 3600ì´ˆ í›„ì— ë‹¤ì‹œ ìš”ì²­í• ìˆ˜ìˆë„ë¡ í•œë‹¤.



## 5xx (ì„œë²„ ì˜¤ë¥˜)

+ ìƒíƒœ ì½”ë“œë“¤ì€ ì„œë²„ ì˜¤ë¥˜ë¡œ ì¸í•´ ìš”ì²­ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜ë¯¸.
+ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì€ ìœ íš¨í•˜ì—¬ ì‘ì—…ì„ ì§„í–‰í–ˆëŠ”ë° ë„ì¤‘ì— ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš°.

> `500, 502, 503` ë“±ì˜ ì˜¤ë¥˜ë¥¼ ë§Œë‚˜ë´¤ì„ ê±°ë‹¤.
>
> API ì„œë²„ì˜ ì‘ë‹µì—ì„œ `5XX`ì˜¤ë¥˜ê°€ ë°œìƒí•´ì„œëŠ” ì•ˆëœë‹¤.
>
> **WASëŠ” ë¡œì§ ìˆ˜í–‰ì¤‘ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ë¬´ì¡°ê±´  `5XX` ìƒíƒœì½”ë“œë¥¼ ë°œìƒ**ì‹œí‚¤ëŠ”ë°, ì´ëŠ” ê°œë°œìì˜ ë¶€ì£¼ì˜ì—ì„œ ì˜¨ë‹¤.
>
> 
>
> Springì—ì„œì²˜ëŸ¼ WASë¥¼ ê°œë°œí• ë•Œ **ì˜ˆì™¸ì²˜ë¦¬**ë¥¼ í†µí•´ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë“¤ì„ `4xx`,`2xx` ë“± **ë‹¤ë¥¸ ìƒíƒœì½”ë“œë¡œ ì²˜ë¦¬**í•˜ê¸° ë•Œë¬¸ì— `5xx`ì´ ë°œìƒí–ˆë‹¤ë©´
>
> 
>
> **ê°œë°œìê°€ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ë†“ì³¤ê±°ë‚˜ ìš”ì²­ì— ëŒ€í•œ ê²€ì¦ì„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ì§€ ì•Šì€ê²ƒì´ë‹¤.**  
>
> 
>
> **ê°œë°œìëŠ” ì™„ë²½í•œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í†µí•´ 5XX ì„œë²„ ì˜¤ë¥˜ ìƒíƒœ ì½”ë“œë¥¼ ë°˜í™˜í•˜ì§€ ì•Šë„ë¡ í•´ì•¼ í•œë‹¤.**





## ì •ë¦¬

**ì •í™•í•œ ì‘ë‹µì˜ ìƒíƒœì½”ë“œë§Œìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë§ì€ ì •ë³´ë¥¼ ì „ë‹¬í•  ìˆ˜ê°€ ìˆê¸° ë•Œë¬¸ì— ì‘ë‹µì˜ ìƒíƒœì½”ë“œ ê°’ì„ ëª…í™•íˆ ëŒë ¤ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.**



ìƒíƒœì½”ë“œì— ë”°ë¼ ì‘ë‹µ í•˜ëŠ” ë°©ë²•ì€ ìœ ì—°í•˜ë‹¤.

ì˜ˆë¥¼ë“¤ì–´ HTTP headerì˜ locationì— URLì„ ë‹´ì•„ ì£¼ëŠ”ê±´  `301` ì—ì„œ ì‚¬ìš©í•˜ì§€ë§Œ

íšŒì› ê°€ì… í›„ì— í”„ë¡œí•„ ë§í¬ë¥¼ locationì— ë‹´ì•„ì£¼ëŠ”ë“± `200`ì—ì„œë„ í™œìš©í• ìˆ˜ìˆë‹¤.

> ë‹¨ ì´ê²½ìš° í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìì—ê²Œ locationì— ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ë‹´ì•„ì£¼ì—ˆìœ¼ì‹œ í•„ìš”í•˜ë©´ ì“°ë¼ê³  ëª…ì‹œí•´ì¤˜ì•¼í•œë‹¤.



## Reference

---

https://sanghaklee.tistory.com/61

https://ko.wikipedia.org/wiki/HTTP_%EC%83%81%ED%83%9C_%EC%BD%94%EB%93%9C









# [RestAPI]  ResponseEntity<T> , @ResponseBody ë¡œ ì‘ë‹µ  HTTP ë‹¤ë£¨ê¸°

------



ìƒíƒœì½”ë“œì™€ HTTP header ìŠ¤í™ì— ëŒ€í•´ì„œ ëŒ€ëµ ì•Œì•„ë³´ì•˜ìœ¼ë‹ˆ `Springì—ì„œ ì‘ë‹µ ë°ì´í„°ë¥¼ ìƒì„±í•˜ëŠ” ë²•`ì„ ì•Œì•„ë³´ì



**Springì—ì„œ restAPIë¥¼ ê°œë°œí• ë•Œ HTTP ì‘ë‹µì„ ë‹¤ë£¨ëŠ” ë°©ë²•ì´ 2ê°€ì§€ ìˆë‹¤.**

>  ResponseEntity í´ë˜ìŠ¤ ì‚¬ìš© `í˜¹ì€` @ResponseBody ì—ë„ˆí…Œì´ì…˜ ì‚¬ìš©





**@ResponseBody**

*@ResponseBody* ëŠ” *HTTP* ê·œê²©ì— ë§ëŠ” ì‘ë‹µì„ ë§Œë“¤ì–´ì£¼ê¸° ìœ„í•œ *Annotation*

```java
@RequestMapping(value = "/message")
@ResponseBody
public Message get() {
    return new Message(penguinCounter.incrementAndGet() + " penguin!");
}
```

+ ì»¨íŠ¸ë¡¤ëŸ¬ì— @RestControllerë¥¼ ë¶™ì´ë©´ ë‚´ë¶€ ë©”ì„œë“œë“¤ì—ê²Œ ìë™ìœ¼ë¡œ @ResponseBodyê°€ ì ìš©ëœë‹¤.

+ JAVA ê°ì²´ë‚˜ Stringì„ **HttpMessageConverter**ë¥¼ ì´ìš©í•´ì„œ jsonìœ¼ë¡œ ë³€í™˜í•´ì„œ ì‘ë‹µ HTTP bodyì— ë‹´ì•„ì¤€ë‹¤.

+ @RequestBodyëŠ” ë°˜ëŒ€ë¡œ ìš”ì²­ HTTP bodyì— ë‹´ê²¨ì˜¨ json ë°ì´í„°ë¥¼ JAVA ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

+ HTTP header ì •ë³´ëŠ” ë”°ë¡œ ë‹¤ë£¨ì§€ ì•Šê¸° ë–„ë¬¸ì— ì„œë¸”ë¦¿ìœ¼ë¡œ í˜¸ì¶œí•œ requestë‚˜ responseê°ì²´ì—ì„œ ë”°ë¡œ ë³€ê²½í•´ì¤˜ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆë‹¤.

 

 **HTTP bodyì— ë‹´ê¸´ ë°ì´í„°ë§Œ ë‹¤ë£¨ëŠ” ê²½ìš° ì—ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í• ìˆ˜ìˆë‹¤.**



**ResponseEntity<T>**

HTTP bodyì˜ ë°ì´í„°ë§Œ ë‹¤ë£¨ëŠ” @ResposeBodyë¥¼ ë³´ì™„í•´ì„œ `ìƒíƒœì½”ë“œ + HTTP body + HTTP headerë¥¼ í•˜ë‚˜ì˜ ê°ì²´`ë¡œ ë‹¤ë£¨ë„ë¡ í•´ì£¼ëŠ” í´ë˜ìŠ¤

```java
@RequestMapping(value = "/message")
public ResponseEntity<Message> get() {
    Message message = new Message(penguinCounter.incrementAndGet() + " penguin!");
    return new ResponseEntity<Message>(message, HttpStatus.OK);
}
```

+ ìŠ¤í”„ë§ì€ Http í”„ë¡œí† ì½œì„ ì´ìš©í•˜ëŠ” í†µì‹ ì˜ headerì™€ body ê´€ë ¨ ì •ë³´ë¥¼ ë‹¤ë£¨ëŠ”ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” í´ë˜ìŠ¤ `HttpEntityë€ í´ë˜ìŠ¤` ë¥¼ ì œê³µí•œë‹¤.

> ì¦‰, í†µì‹  HTTP ê´€ë ¨ `headerì™€ body ê°’ë“¤ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ì €ì¥` í•˜ëŠ” ê²ƒì´ HttpEntity í´ë˜ìŠ¤ ê°ì²´ë¼ëŠ” ê²ƒì´ë‹¤.



+ ì´ `HttpEntity` ë¥¼ ìƒì†ë°›ì€ `RequestEntity`ì™€`ResponseEntity` í´ë˜ìŠ¤ê°€ ì¡´ì¬í•œë‹¤.

 

**ìƒíƒœì½”ë“œ + HTTP body + HTTP headerë¥¼ ëª¨ë‘ ë‹¤ë¤„ì•¼ í•˜ëŠ” ê²½ìš° ì‚¬ìš©í• ìˆ˜ìˆë‹¤.**

 



### ì •ë¦¬

 **ResponseEntityë¥¼ ì‚¬ìš©: **ìƒíƒœì½”ë“œ + HTTP body + HTTP headerë¥¼ ëª¨ë‘ ë‹¤ë¤„ì•¼ í•˜ëŠ” ê²½ìš°

 **@ResponseBodyë¥¼ ì‚¬ìš©:**  HTTP bodyì— ë‹´ê¸´ ë°ì´í„°ë§Œ ë‹¤ë£¨ëŠ” ê²½ìš°





## Reference

---

https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html

https://tecoble.techcourse.co.kr/post/2021-05-10-response-entity/





# [RestAPI]  ResponseEntity<T> ìì„¸íˆ ì•Œì•„ë³´ê¸° (feat. ìƒíƒœì½”ë“œ)

----



í”„ë¡œì íŠ¸ë¡œ restAPIë¥¼ ê°œë°œí•˜ë‹¤ë³´ë‹ˆ ì‘ë‹µì— ê°„ë‹¨í•œê²½ìš° @ResponseBodyë¥¼ ì“°ì§€ë§Œ  `HTTP header`ë¼ë˜ì§€ `ìƒíƒœì½”ë“œ ì œì–´` ë“±  HTTP ìŠ¤í™ì„ ë‹¤ë¤„ì•¼í•˜ëŠ” ê²½ìš°ê°€ í›¨ì”¬ ë§ì•„ **ResponseEntityë¥¼ ì“°ê²Œ ë˜ëŠ” ê²½ìš°ê°€ í›¨ì”¬ ë§ë‹¤.**

> **ìƒíƒœì½”ë“œ ì°¨ì´**
>
> @ResponseBodyì˜ ê²½ìš° @ResponseStatus(HttpStatus.OK)ë¡œ ë”°ë¡œ ìƒíƒœì½”ë“œë¥¼ ë‹¤ë¤„ì¤˜ì•¼ í•˜ëŠ”ë° ì¡°ê±´ë³„ë¡œ ì‘ë‹µ ìƒíƒœì½”ë“œê°€ ë‹¤ë¥¸ê²½ìš° ë²ˆê±°ë¡­ë‹¤. 
>
> ~~~java
>@ResponseBody
> @ResponseStatus(HttpStatus.OK)  //ìƒíƒœì½”ë“œ ì§€ì •
>public MoveResponseDto move(@PathVariable String name, @RequestBody MoveDto moveDto) {
> 
>...
> 
>return moveResponseDto;
> }
>~~~
> 
> 
> 
> ë°˜ë©´ì— ResponseEntity<T>ëŠ” í•˜ë‚˜ê°ì²´ë¡œ ì‘ë‹µì„ ë‹¤ë£¨ê¸° ë•Œë¬¸ì— ì¡°ê±´ë³„ë¡œ ì‘ë‹µ ìƒíƒœì½”ë“œê°€ ë‹¤ë¥¸ê²½ìš°ì—ë„ ë¬¸ì œì—†ë‹¤.
>  
>   ~~~java
>       public ResponseEntity<MoveResponseDto> move(@PathVariable String name,
>    @RequestBody MoveDto moveDto) {
> 
>  ...
>
>  return new ResponseEntity<MoveResponseDto>(moveResponseDto, headers, HttpStatus.valueOf(200)); // ResponseEntityë¥¼ í™œìš©í•œ ì‘ë‹µ ìƒì„±
>}
> ~~~



**ê¸€ì„ ì½ê¸°ì— ì•ì„œ ê³µì‹ë¬¸ì„œë¥¼ í•¨ê»˜ ì°¸ì¡°í•˜ì**

**[ê³µì‹ë¬¸ì„œ]** https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html





## ResponseEntity<T>

---



**ìƒíƒœì½”ë“œ + HTTP body + HTTP headerë¥¼ í¬í•¨í•´ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ë§Œë“¤ì–´ ì¤€ë‹¤.**

> ì‘ë‹µ HTTPë¡œ ë³€í™˜ë  ì •ë³´ë¥¼ ëª¨ë‘ ë‹´ì€ ìš”ì†Œë“¤ì„ ê°ì²´ë¡œ ë§Œë“¤ì–´ì„œ ë°˜í™˜
>
> ìŠ¤í”„ë§ì´ HTTPë¡œ ë³€í™˜í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ responseí•œë‹¤.



**êµ¬ì¡° ì‚´í´ë³´ê¸°**



ResponseEntityëŠ” ìŠ¤í”„ë§ì´ HTTPë¥¼ ë‹¤ë£¨ê¸°ìœ„í•´ ì œê³µí•˜ëŠ” HttpEntityë¥¼ ìƒì† ë°›ê³ ìˆë‹¤.

> RequestEntityë„ ìˆë‹¤.

~~~java
//ResponseEntity ì„ ì–¸ êµ¬ì¡°
public class ResponseEntity extends HttpEntity {

  private final Object status; //Statusë¥¼ í•„ë“œê°’ìœ¼ë¡œ ê°€ì§€ê³ ìˆìŒ. 
    
  ...
}
~~~



HttpEntityë¥¼ ë³´ë©´ HTTP header ì™€ bodyë¥¼ í•„ë“œë¡œ ê°€ì§€ê³ ìˆë‹¤.

~~~JAVA
//HttpEntity ì„ ì–¸ êµ¬ì¡°
public class HttpEntity<T> {
    public static final HttpEntity<?> EMPTY = new HttpEntity<>();
  
  
    private final HttpHeaders headers; //HttpHeaders -> headerë¥¼ ì„¤ì •í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤
  
    @Nullable
    private final T body; //ì œë„ˆë¦­ìœ¼ë¡œ ë°”ë””ì— ë“¤ì–´ê°ˆ ê°ì²´ë¥¼ ë°›ìŒ -> HttpMessageConverter 
}
~~~

> bodyê°€ ì œë„ˆë¦­ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ìˆìŒì„ ì¸ì§€í•˜ì



ì¦‰, *ResponseEntity* ëŠ” *HttpEntity* ë¥¼ ìƒì†í•˜ê³ ìˆê¸° ë•Œë¬¸ì— ìƒíƒœì½”ë“œ + HTTP body + HTTP headerë¥¼ ëª¨ë‘ ì„¤ì •í•´ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ë§Œë“¤ìˆ˜ ìˆë‹¤,





**ê°ì²´ ìƒì„±í•˜ê¸°  Constructor vs Builder**



**Constructor** 



ê³µì‹ë¬¸ì„œë¥¼ ì‚´í´ë³´ë©´ ì—¬ëŸ¬ê°œì˜ Constructor(ìƒì„±ì)ê°€ ìˆìŒì„ ì•Œìˆ˜ìˆë‹¤.

ìœ„ êµ¬ì¡°ì—ì„œ ì‚´í´ë³´ì•˜ë“¯ì´ ResponseEntityëŠ” ë°”ë””,í—¤ë”,ìƒíƒœì½”ë“œë¥¼ ì„¤ì •í•´ì„œ ìƒì„±í• ìˆ˜ìˆë‹¤.



*Constructor* ë¥¼ í™œìš©í•˜ì—¬ *ResponseEntity* ë¥¼ ì‚¬ìš©í•œ ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤

> ì£¼ë¡œ  *Body* , *Header* , *StatusCode* ë¥¼ ì°¨ë¡€ë¡œ ì…ë ¥í•˜ëŠ” Constructorë¥¼ ì‚¬ìš©í•œë‹¤

~~~java
public ResponseEntity<MoveResponseDto> move(@PathVariable String name,
    @RequestBody MoveDto moveDto) {
    
    //header data
    HttpHeaders headers = new HttpHeaders();
    headers.set("Game", "Chess");
    
    String command = makeMoveCmd(moveDto.getSource(), moveDto.getTarget());
    springChessService.move(name, command, new Commands(command));
    
    //body data
    MoveResponseDto moveResponseDto = new MoveResponseDto(springChessService
        .continuedGameInfo(name), name);

    return new ResponseEntity<MoveResponseDto>(moveResponseDto, headers, HttpStatus.valueOf(200)); // ResponseEntityë¥¼ í™œìš©í•œ ì‘ë‹µ HTTP ìƒì„±
}
~~~





**Builder**



*ResponseEntity* ë¥¼ ì‚¬ìš©í•  ë•Œ, *Constructor* ë¥¼ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ëŠ” *Builder* ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.

~~~java
//Constructor  
return new ResponseEntity<MoveResponseDto>(moveResponseDto, headers, HttpStatus.valueOf(200));

//Builder
return ResponseEntity.ok() //ìƒíƒœì½”ë“œ ë©”ì„œë“œ
        .headers(headers)
        .body(moveResponseDto);
~~~

ì°¨ì´ë¼ë©´ ConstructorëŠ” ìƒíƒœì½”ë“œ ìˆ˜ë¥¼ ì§ì ‘ ì…ë ¥í•˜ëŠ”ë° ë°˜í•´ BuilderëŠ” Builderê°€ ì œê³µí•˜ëŠ” ë©”ì„œë“œ ok()ë¥¼ ì´ìš©í•´ ìƒíƒœì½”ë“œë¥¼ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì´ë‹¤.

Builderê°€ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ ì´ìš©í•´ ResponseEntity ê°ì²´ë¥¼ êµ¬ì¶•í•¨ìœ¼ë¡œì¨ ì¢€ë” ì´í•´í•˜ê¸°ë„ ì‰½ê³  ìƒíƒœì½”ë“œ valueë¥¼ ì˜ëª» ë„£ëŠ” ì¼ì„ ë°©ì§€í•˜ëŠ” ë“± ì‹¤ìˆ˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.



## ì •ë¦¬

ResponseEntityë¥¼ ì‚¬ìš©í•˜ë©´   *Body* , *Header* , *StatusCode* ë¥¼ ì„¤ì •í•œ ì‘ë‹µ HTTPë¥¼ ì‰½ê²Œ ìƒì„±í•´ì„œ ì‘ë‹µí• ìˆ˜ìˆë‹¤.



## Reference

---

https://tecoble.techcourse.co.kr/post/2021-05-10-response-entity/

https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html





# [RestAPI]  CORS (Cross Origin Resource Sharing)

---

ë°±ì—”ë“œ ì„œë²„ë¡œë¶€í„° í”„ë¡ íŠ¸ì—”ë“œ ì—í”Œë¦¬ì¼€ì´ì…˜ì„ ë¶„ë¦¬í•´í•˜ê³  ì„œë¡œ í†µì‹ ì„ ì‹œë„í•œ ìˆœê°„ ì´ CORSë¼ëŠ” ë…€ì„ì„ ë§ˆì£¼ì³¤ë‹¤

> vue.jsì™€ spring bootë¡œ ë§Œë“  restAPIì„œë²„ê°€ í†µì‹ ì„ í•˜ë©´ì„œ ë°œìƒí–ˆë‹¤.



### **CORS**

`Cross-Origin Resource Sharing` ë¡œ êµì°¨ ì¶œì²˜ ë¦¬ì†ŒìŠ¤ ê³µìœ ë¼ëŠ” ëœ»ì´ë‹¤.

í•œêµ­ë§ë¡œ ì˜ë¯¸ë¥¼ í’€ì–´ë³´ìë©´ **ë‹¤ë¥¸ ì¶œì²˜ë¡œë¶€í„° ì˜¤ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ í—ˆìš©**í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.



**ì¶œì²˜ë€?**

ì•Œê³ ìˆë‹¤ ì‹¶ì´ URIëŠ” ë‹¤ì–‘í•œ êµ¬ì„± ìš”ì†Œë¡œ ë¦¬ì†ŒìŠ¤ì´ ìœ„ì¹˜ë¥¼ í‘œì‹œí•˜ê³ ìˆë‹¤.

![uri structure](C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\uri-structure.png)

ì›¹ì—ì„œ ì¶œì²˜ë€ `Protocol + Host + Port` ë¥¼ ì˜ë¯¸í•œë‹¤.

ì´ 3ê°€ì§€ ìš”ì†Œì¤‘ì— í•˜ë‚˜ë¼ë„ ë‹¤ë¥´ë©´ `ë‹¤ë¥¸ ì¶œì²˜`ë¡œ ê°„ì£¼í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

ë°˜ëŒ€ë¡œ ì´ 3ê°€ì§€ ìš”ì†Œë§Œ ê°™ìœ¼ë©´ `ë™ì¼ ì¶œì²˜`ë¡œ ê°„ì£¼í•œë‹¤ëŠ” ê²ƒì´ë‹¤.



### SOP(Same-Origin Policy: ë™ì¼ì¶œì²˜ì •ì±…)

ì›¹ ìƒíƒœê³„ì—ì„œëŠ” ë‹¤ë¥¸ ì¶œì²˜ë¡œë¶€í„° ì˜¤ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì œí•œí•˜ëŠ” ì •ì±…ì´ ì¡´ì¬í•œë‹¤.

ë°”ë¡œ `SOP` ë™**ì¼í•œ ì¶œì²˜ë§Œ APIë‚˜ ë°ì´í„° ì ‘ê·¼ì´ ê°€ëŠ¥**í•˜ë„ë¡ í•œë‹¤ëŠ” **ë™ì¼ì¶œì²˜ì •ì±…**ì´ë‹¤.



**ì™œ ë‹¤ë¥¸ ì¶œì²˜ë¥¼ ì°¨ë‹¨í•˜ëŠ”ê±¸ê¹Œ?**

ì¶œì²˜ê°€ ë‹¤ë¥¸ ë‘ ê°œì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë§ˆìŒëŒ€ë¡œ ì†Œí†µí•  ìˆ˜ ìˆëŠ” í™˜ê²½ì€ ê½¤ ìœ„í—˜í•œ í™˜ê²½ì´ë‹¤.

ì‚¬ìš©ìê°€ í˜ì´ìŠ¤ë¶ì— ì ‘ê·¼í•œë‹¤ê³  ê°€ì •í•´ë³´ì.

**`ë¸Œë¼ìš°ì €`ì—ëŠ” ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ê°€ ì €ì¥ë˜ì–´ìˆë‹¤.**

> ì„¸ì…˜,ì¿ í‚¤,ë¡œê·¸ì¸ ì •ë³´ ë“±



ì‚¬ìš©ìëŠ” í˜ì´ìŠ¤ë¶ì— **ë°©ë¬¸í• ë•Œ ì´ ì •ë³´ë¥¼ í•¨ê»˜ ê°€ì§€ê³  ë°©ë¬¸**í•˜ëŠ”ë°

ì–´ë–¤ ì•…ì˜ì ì¸ ì‚¬ì´íŠ¸ Xê°€ ì‚¬ìš©ìì—ê²Œ ì ‘ì†ì„ ìœ ë„í•´ ì‚¬ìš©ìì˜ ì •ë³´ì™€ í•¨ê»˜ í˜ì´ìŠ¤ë¶ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ ì‚¬ìš©ìì¸ê²ƒ ì²˜ëŸ¼ ìœ„ì¥í•´ í˜ì´ìŠ¤ë¶ì—ê²Œ ì¸ì¦ì„ ë°›ê³  ì—¬ëŸ¬ ì •ë³´ë¥¼ ì ‘ê·¼í• ìˆ˜ìˆë‹¤.

> ë©”ì¼ ì´ë‚˜ ìŠ¤íŒ¸ ë“±ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì ‘ì†í•˜ê²Œ í•¨



<img src="C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\image-20220119145248259.png" alt="image-20220119145248259" style="zoom:50%;" />

**ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ë“±ì¥í•œê²Œ SOPì´ë‹¤.**

ì—¬ê¸°ì„œ `Origin` ì€  ìš”ì²­ì˜ ì¶œì²˜ë¥¼ ëœ»í•œë‹¤.

facebookì´ë¼ëŠ” ì¶œì²˜ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì¶œì²˜ë¡œë¶€í„° ìš”ì²­ì´ ì˜¤ë©´ í•´ë‹¹ ìš”ì²­ì„ ì°¨ë‹¨í•¨ìœ¼ë¡œ ì¨ ìœ„ì™€ ê°™ì€ ë¬¸ì œë¥¼ ë§‰ëŠ”ê²ƒì´ë‹¤.





### **CORS!**

ì´ì¯¤ë˜ë©´ CORSê°€ ë­”ì§€ ê°ì´ ì¡í˜”ì„ ê²ƒì´ë‹¤.

`SOP`ëŠ” ë‹¤ë¥¸ ì¶œì²˜ë¡œë¶€í„° ì˜¤ëŠ” ìš”ì²­ì„ ë§‰ì•„ë‚´ëŠ” ì—­í• ì„ í•˜ëŠ”ê²ƒì´ê³  ì´ ìš”ì²­ì„ ë°›ê³ ì‹¶ìœ¼ë©´ `CORS` ë¥¼ ì„¤ì •í•´ 

í•´ë‹¹ ì¶œì²˜ë¥¼ í—ˆìš©í•˜ë©´ ë°›ì„ìˆ˜ìˆë„ë¡ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.



### CORSì˜ ë™ì‘ë°©ì‹

ì¶œì²˜ë¥¼ ë¹„êµí•˜ëŠ” ë¡œì§ì€ ì„œë²„ì— ì¡´ì¬í•˜ëŠ”ê²Œ ì•„ë‹Œ  `ë¸Œë¼ìš°ì €`ì— í¬í•¨ë˜ëŠ” ë¡œì§ìœ¼ë¡œ CORSëŠ” **ì„œë²„ ê°„ í†µì‹ ì„ í•  ë•ŒëŠ” ì´ ì •ì±…ì´ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.** 

> `ë¸Œë¼ìš°ì €`ì— í¬í•¨ë˜ëŠ” ìŠ¤íŒ©ì„ì„ ì•Œì•„ë‘ì



**ê¸°ë³¸íë¦„**

ìš°ë¦¬ê°€ CORS ì •ì±…ì„ ìœ„ë°˜í•˜ëŠ” ë¦¬ì†ŒìŠ¤ ìš”ì²­ì„ í•˜ë”ë¼ë„ í•´ë‹¹ ì„œë²„ê°€ ê°™ì€ ì¶œì²˜ì—ì„œ ë³´ë‚¸ ìš”ì²­ë§Œ ë°›ê² ë‹¤ëŠ” ë¡œì§ì„ ê°€ì§€ê³  ìˆëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ì„œë²„ëŠ” ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì„ í•˜ê³ , ì´í›„ ë¸Œë¼ìš°ì €ê°€ ì´ ì‘ë‹µì„ ë¶„ì„í•´ì„œ CORS ì •ì±… ìœ„ë°˜ì´ë¼ê³  íŒë‹¨ë˜ë©´ ê·¸ ì‘ë‹µì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ê·¸ëƒ¥ ë²„ë¦¬ëŠ” ìˆœì„œì¸ ê²ƒ

![cors](C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\cors.png)



ì›¹ í´ë¼ì´ì–¸íŠ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•ŒëŠ” HTTP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚´ê²Œ ë˜ëŠ”ë°, ì´ë•Œ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ í—¤ë”ì— `Origin`ì´ë¼ëŠ” í•„ë“œì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ì¶œì²˜ë¥¼ í•¨ê»˜ ë‹´ì•„ë³´ë‚¸ë‹¤.

```http
Origin: https://evan-moon.github.io
```

ì´í›„ ì„œë²„ê°€ ì´ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ í•  ë•Œ ì‘ë‹µ í—¤ë”ì˜ `Access-Control-Allow-Origin`ì´ë¼ëŠ” ê°’ì— â€œì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ í—ˆìš©ëœ ì¶œì²˜â€ë¥¼ ë‚´ë ¤ì£¼ê³ , 

ì´í›„ ì‘ë‹µì„ ë°›ì€ ë¸Œë¼ìš°ì €ëŠ” ìì‹ ì´ ë³´ëƒˆë˜ ìš”ì²­ì˜ `Origin`ê³¼ ì„œë²„ê°€ ë³´ë‚´ì¤€ ì‘ë‹µì˜ `Access-Control-Allow-Origin`ì„ ë¹„êµí•´ë³¸ í›„ ì´ìƒì´ ì—†ìœ¼ë©´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ë‚´ë ¤ë°›ëŠ”ë‹¤.

> ì„œë¡œ ë‹¤ë¥´ë©´ CORS ì •ì±…ì— ì˜í•´ originì´ ë‹¤ë¥´ë‹ˆ ì°¨ë‹¨. CORS í„°íŠ¸ë¦¼!



**ê¸°ë³¸ íë¦„ì˜ ë§¥ë½ì€ ìš”ì²­ì‹œ `Origin`ì— ë‹´ê¸´ ì¶œì²˜ì™€ ì„œë²„ê°€ ì‘ë‹µí•œ `Access-Control-Allow-Origin`ì˜ ì¶œì²˜ ëª©ë¡ë“¤ì„ ë¹„êµí•´ì„œ  ìš”ì²­ì„ ì°¨ë‹¨í• ì§€ ë§ì§€ `ë¸Œë¼ìš°ì €`ê°€ ê²°ì •í•œë‹¤ëŠ” ê²ƒì´ë‹¤.**

> ì„œë²„ ì‘ë‹µ í—¤ë”ì— Access-Control-Allow-Origin ì—  Originì´ ì¡´ì¬í•˜ë©´ ë¦¬ì†ŒìŠ¤ë¥¼ ë‚´ë ¤ ë°›ëŠ”ë‹¤.
>
> ì—†ë‹¤ë©´ CORS ì •ì±… ìœ„ë°˜ ERROR ë°œìƒì‹œí‚´



**CORSì˜ ì ‘ê·¼ì œì–´ ì‹œë‚˜ë¦¬ì˜¤**

ê¸°ë³¸ ë§¥ë½ì€ ìœ„ì²˜ëŸ¼ ê°„ë‹¨í•˜ì§€ë§Œ CORSëŠ” 3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê°€ì§€ê³ ìˆë‹¤.

Simple Requset : ë‹¨ìˆœìš”ì²­

Preflight Request : ì‚¬ì „ìš”ì²­

Credintialed Request : ì¸ì¦ì •ë³´ í¬í•¨ ìš”ì²­



### Preflight Request : ì‚¬ì „ìš”ì²­

>`í”„ë¦¬í”Œë¼ì´íŠ¸(Preflight)` ë°©ì‹ì€ ì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ê°€ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ë•Œ ê°€ì¥ ë§ˆì£¼ì¹˜ëŠ” ì‹œë‚˜ë¦¬ì˜¤ì´ë‹¤. 
>
>ì´ ì‹œë‚˜ë¦¬ì˜¤ì— í•´ë‹¹í•˜ëŠ” ìƒí™©ì¼ ë•Œ ë¸Œë¼ìš°ì €ëŠ” ìš”ì²­ì„ í•œë²ˆì— ë³´ë‚´ì§€ ì•Šê³  **ì˜ˆë¹„ ìš”ì²­ê³¼ ë³¸ ìš”ì²­**ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ì„œë²„ë¡œ ì „ì†¡í•œë‹¤.
>
>> ì˜ˆë¹„ ìš”ì²­ì„ ë³´ë‚´ë³´ê³  ë³¸ ìš”ì²­ì„ ë³´ë‚¼ì§€ íŒë‹¨í•œë‹¤.
>
>
>
>ì˜ˆë¹„ìš”ì²­ê³¼ ë³¸ìš”ì²­ 2ë²ˆì´ ì™”ë‹¤ê°”ë‹¤í•˜ëŠ”ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì—  ì„œë²„ëŠ” ì˜ˆë¹„ìš”ì²­ì´í›„ `ì‘ë‹µ ìºì‹œë¥¼ ì„¤ì •`í•˜ê³  ë³¸ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì²˜ë¦¬í•œë‹¤.
>
>
>
>ë³¸ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ `ë¸Œë¼ìš°ì € ìŠ¤ìŠ¤ë¡œ ì´ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ ì•ˆì „í•œì§€ í™•ì¸í•˜ê¸°ìœ„í•´ ì„œë²„ì—ê²Œ ì˜ˆë¹„ ìš”ì²­ì„ ë³´ë‚´ëŠ”ê²ƒ`ì„ `Preflight Request`ë¼ê³  í•œë‹¤.
>
>
>
>ê·¸ë¦¼ìœ¼ë¡œ ë³´ë©´ ì´ëŸ° í˜•ì‹ì´ë‹¤.
>
><img src="C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\cors-preflight.png" alt="cors preflight" style="zoom: 67%;" />
>
>`Preflight Request` ëŠ” HTTP method ì¤‘ **OPTIONS**ë¼ëŠ” ë©”ì„œë“œë¥¼ ì´ìš©í•´ ìš”ì²­ì„ ë³´ë‚´ë©° ì´ë•Œ í—¤ë”ì— ì•„ë˜ì™€ ê°™ì€ ì •ë³´ë¥¼ ê¼­ í¬í•¨í•´ì•¼í•œë‹¤.
>
>> **Origin:** ìš”ì²­ì˜ ì¶œì²˜
>>
>> **Access-Control-Request-Headers:** ë³¸ ìš”ì²­ì— ì‚¬ìš©ë  HTTP method
>>
>> **Access-Control-Request-Method:** ë³¸ ìš”ì²­ì— ì¶”ê°€ í—¤ë”
>
>
>
>ì´ ì •ë³´ë¥¼ ê°€ì§€ê³  ì„œë²„ì—ê²Œ ì˜ˆë¹„ ìš”ì²­ì„ ë³´ë‚´ë©´ ì„œë²„ëŠ” ì´ ì˜ˆë¹„ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë³´ë‚´ì¤€ë‹¤.
>
>ì‘ë‹µ í—¤ë”ì—  `Access-Control-Allow-Origin` ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•œ ì¶œì²˜ ëª©ë¡ì„ ë‹´ì•„ ì‘ë‹µí•œë‹¤.
>
>
>
>ë¸Œë¼ìš°ì €ëŠ” `ê¸°ë³¸íë¦„` ê³¼ ê°™ì´ Origin ê³¼ Access-Control-Allow-Originì„ ë¹„êµí•´ì„œ CORS ì •ì±… ìœ„ë°˜ ì—ëŸ¬ ë°œìƒ ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤.



### Simple Requset : ë‹¨ìˆœìš”ì²­

>ë‹¨ìˆœ ìš”ì²­ì€ ì˜ˆë¹„ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•Šê³  ë°”ë¡œ ì„œë²„ì—ê²Œ ë³¸ ìš”ì²­ë¶€í„° ë•Œë ¤ë°•ì€ í›„, 
>
>ì„œë²„ê°€ ì´ì— ëŒ€í•œ ì‘ë‹µì˜ í—¤ë”ì— `Access-Control-Allow-Origin`ê³¼ ê°™ì€ ê°’ì„ ë³´ë‚´ì£¼ë©´ ê·¸ë•Œ ë¸Œë¼ìš°ì €ê°€ CORS ì •ì±… ìœ„ë°˜ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. 
>
><img src="C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\simple-request.png" alt="simple request" style="zoom:67%;" />
>
>
>
>ì˜ˆë¹„ ìš”ì²­ì„ ìƒëµí•˜ëŠ”ê±´ ì•„ë˜ ì¡°ê±´ì´ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” íŠ¹ìˆ˜í•œ ìƒí™©ì—ë§Œ ìƒëµì´ ê°€ëŠ¥í•˜ë‹¤.
>
>> 1. ìš”ì²­ì˜ ë©”ì†Œë“œëŠ” `GET`, `HEAD`, `POST` ì¤‘ í•˜ë‚˜ì—¬ì•¼ í•œë‹¤.
>> 2. `Accept`, `Accept-Language`, `Content-Language`, `Content-Type`, `DPR`, `Downlink`, `Save-Data`, `Viewport-Width`, `Width`ë¥¼ ì œì™¸í•œ í—¤ë”ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤.
>> 3. ë§Œì•½ `Content-Type`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” `application/x-www-form-urlencoded`, `multipart/form-data`, `text/plain`ë§Œ í—ˆìš©ëœë‹¤.
>
>
>
>2,3ë²ˆ ì¡°ê±´ì´ ê¹Œë‹¤ë¡­ë‹¤.
>
> ì‚¬ìš©ì ì¸ì¦ì— ì‚¬ìš©ë˜ëŠ” `Authorization` í—¤ë” ì¡°ì°¨ ì € ì¡°ê±´ì—ëŠ” í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.
>
>ë˜í•œ ëŒ€ë¶€ë¶„ì˜ HTTP APIëŠ” `text/xml`ì´ë‚˜ `application/json` ì»¨í…ì¸  íƒ€ì…ì„ ê°€ì§€ë„ë¡ ì„¤ê³„ë˜ê¸° ë•Œë¬¸ì— ì‚¬ì‹¤ ìƒ ì´ ì¡°ê±´ë“¤ì„ ëª¨ë‘ ë§Œì¡±ì‹œí‚¤ëŠ” ìƒí™©ì„ ë§Œë“¤ê¸°ëŠ” ê·¸ë ‡ê²Œ ì‰½ì§€ ì•Šì€ ê²ƒì´ í˜„ì‹¤ì´ë‹¤.
>
>
>
>ì‚¬ì‹¤ìƒ ê±°ì˜ ì‚¬ìš©ë˜ì–´ì§ˆ ì¼ì´ ì—†ë‹¤.



**Preflight Request ì¦‰, ì˜ˆë¹„ ìš”ì²­ì´ ì™œ í•„ìš”í• ê¹Œ?**

ì´ì¯¤ì—ì„œ Preflight Request ì¦‰, ì˜ˆë¹„ ìš”ì²­ì´ ì™œ í•„ìš”í• ê¹Œ? ì˜ë¬¸ì„ ê°€ì ¸ì•¼í•œë‹¤.

ë‹¤ Simple Requestí•˜ë©´ ì•ˆë˜ë‚˜?



CORSëŠ” ì„œë²„ë¥¼ ìœ„í•œ ì •ì±…ì´ë‹¤.

![image-20220119190451286](C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\image-20220119190451286.png)

CORSì— ëŒ€í•œ ì²˜ë¦¬ê°€ ì•ˆë˜ì–´ìˆëŠ” ì„œë²„ê°€ ìˆë‹¤.

í´ë¼ì´ì–¸íŠ¸ê°€ Preflight Request ì—†ì´ Simple Requestë¡œ PUT,DELET,POSTë“±ì˜ ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ì˜í–¥ì„ ì£¼ëŠ” ìš”ì²­ì„ ë³´ë‚¸ë‹¤ë©´ 

ì„œë²„ëŠ” ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í• ê²ƒì´ê³  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•˜ë˜ ìƒì„±í•˜ë˜ ì„œë²„ DBë¥¼ ìˆ˜ì •í• ê²ƒì´ë‹¤. **í°ì¼ì´ ë‚ ìˆ˜ë„ìˆë‹¤**

> CORS ìœ„ë°˜ì€ ì‘ë‹µì²˜ë¦¬ ì´í›„ì— íŒë³„í• ìˆ˜ìˆê¸° ë•Œë¬¸ì— ì„œë²„ëŠ” ì‘ë‹µì²˜ë¦¬ë¥¼ ëë§ˆì¹œ í›„ ì¼ê²ƒì´ë‹¤.



ê·¸ë¦¬ê³  ë‹¹ì—°í•˜ê²Œë„ ì´ ì„œë²„ëŠ” CORS ì²˜ë¦¬ê°€ ì•ˆë˜ì–´ìˆê¸° ë•Œë¬¸ì— Access-Control-Allow-Originê°€ ì—†ì„ê²ƒì´ê³ 

í´ë¼ì´ì–¸íŠ¸ëŠ” CORS ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ê²ƒì´ì§€ë§Œ **ì´ë¯¸ ì„œë²„ëŠ” ìš”ì²­ì—ëŒ€í•œ ìˆ˜í–‰ì„ í•œ ë’¤ì´ë‹¤.**



ê·¸ëŸ¼ í´ë¼ì´ì–¸íŠ¸ê°€ Preflight Request ë¥¼ í•œë‹¤ë©´?

<img src="C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\image-20220119192225733.png" alt="image-20220119192225733" style="zoom:67%;" />

ì„œë²„ì— ì˜í–¥ì„ ë¼ì¹˜ì§€ ì•ŠëŠ”  Preflight Request ë¡œ ì„œë²„ê°€ CORS ì²˜ë¦¬ê°€ ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì•ˆë˜ì–´ìˆë‹¤ë©´

ì¶”ê°€ë¡œ ìš”ì²­ì„ ë³´ë‚´ì§€ ì•ŠëŠ”ë‹¤.



**ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ CORSì²˜ë¦¬ê°€ ì•ˆë˜ì–´ìˆëŠ” ì„œë²„ë¥¼ ì§€í‚¬ìˆ˜ìˆë‹¤.**



**í•˜ì§€ë§Œ CORSì— ë¬´ì¡°ê±´ ì˜ì¡´í•˜ëŠ”ê²ƒì€ ì˜³ì§€ì•Šë‹¤.** 

ì•…ì˜ì ì¸ ìš”ì²­ìœ¼ë¡œ ì„œë²„ì—ê²Œ ìš”ì²­ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ê°•í–‰ì‹œí‚¬ìˆ˜ìˆê¸° ë•Œë¬¸ì— ê°œë°œìëŠ” CORS ì²˜ë¦¬ì™€ ë”ë¶ˆì–´ ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ì´ë¥¼ ë°©ì§€í•´ì•¼í•œë‹¤.





### Credintialed Request : ì¸ì¦ì •ë³´ í¬í•¨ ìš”ì²­

> 3ë²ˆì§¸ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì¸ì¦ëœ ìš”ì²­ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ ì‹œë‚˜ë¦¬ì˜¤ëŠ” CORSì˜ ê¸°ë³¸ì ì¸ ë°©ì‹ì´ë¼ê¸° ë³´ë‹¤ëŠ” ë‹¤ë¥¸ ì¶œì²˜ ê°„ í†µì‹ ì—ì„œ ì¢€ ë” ë³´ì•ˆì„ ê°•í™”í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
>
> ì¸ì¦ê´€ë ¨ í—¤ë”ë¥¼ í¬í•¨í• ë•Œ ì‚¬ìš©í•˜ëŠ” ìš”ì²­
>
> 
>
> ë¸Œë¼ìš°ì €ëŠ” ì¿ í‚¤ ì •ë³´ë‚˜ ì¸ì¦ê³¼ ê´€ë ¨ëœ í—¤ë”ë¥¼ í•¨ë¶€ë¡œ ìš”ì²­ì— ë‹´ì§€ ì•ŠëŠ”ë‹¤.
>
> ì´ë•Œ ì¸ì¦ ê´€ë ¨ ì •ë³´ë¥¼ í—¤ë”ì— ë‹´ê²Œ í•´ì£¼ëŠ” ì˜µì…˜ì´ `credentials` ì˜µì…˜ì´ë‹¤.
>
> | ì˜µì…˜ ê°’              | ì„¤ëª…                                           |
> | :------------------- | :--------------------------------------------- |
> | same-origin (ê¸°ë³¸ê°’) | ê°™ì€ ì¶œì²˜ ê°„ ìš”ì²­ì—ë§Œ ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤ |
> | include              | ëª¨ë“  ìš”ì²­ì— ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ìˆë‹¤           |
> | omit                 | ëª¨ë“  ìš”ì²­ì— ì¸ì¦ ì •ë³´ë¥¼ ë‹´ì§€ ì•ŠëŠ”ë‹¤            |
>
> 
>
> **í´ë¼ì´ì–¸íŠ¸**
>
> credentials : include
>
> **ì„œë²„**
>
> Access-Control-Allow-Credentials : true
>
> 
>
> `include`ì™€ ê°™ì€ ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ìš”ì²­ì— ì¸ì¦ ì •ë³´ê°€ í¬í•¨ëœë‹¤ë©´, ì´ì œ ë¸Œë¼ìš°ì €ëŠ” ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ ë‹¨ìˆœíˆ `Access-Control-Allow-Origin`ë§Œ í™•ì¸í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì¢€ ë” ë¹¡ë¹¡í•œ ê²€ì‚¬ ì¡°ê±´ì„ ì¶”ê°€í•˜ê²Œ ëœë‹¤.
>
> 
>
> ì„œë²„ëŠ” ì‘ë‹µ í—¤ë”ì˜  `Access-Control-Allow-Origin`ì„ * ë¡œ ì„¤ì •í•˜ë©´ ì•ˆëœë‹¤.
>
> > `*` ì€ ì™€ì¼ì¹´ë“œë¼ëŠ” ì˜ë¯¸ë¡œ ëª¨ë“  Originì„ í—ˆìš©í•œë‹¤ëŠ” ëœ»
>
> ì •í™•í•œ  `Origin`ì„ í‘œê¸°í•´ ì¤˜ì•¼í•œë‹¤.
>
> 
>
> ì¦‰, ì •ë¦¬í•˜ìë©´
>
> 1. `Access-Control-Allow-Origin`ì—ëŠ” `*`ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë©°, ëª…ì‹œì ì¸ URLì´ì–´ì•¼í•œë‹¤.
> 2. ì‘ë‹µ í—¤ë”ì—ëŠ” ë°˜ë“œì‹œ `Access-Control-Allow-Credentials: true`ê°€ ì¡´ì¬í•´ì•¼í•œë‹¤.



## CORSë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•



### ì§ì ‘ í—¤ë”ì˜ Access-Control-Allow-Origin ì„¸íŒ…í•˜ê¸°

CORS ì •ì±… ìœ„ë°˜ìœ¼ë¡œ ì¸í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê°€ì¥ ëŒ€í‘œì ì¸ ë°©ë²•ì€, 

ê·¸ëƒ¥ ì •ì„ëŒ€ë¡œ ì„œë²„ì—ì„œ `Access-Control-Allow-Origin` í—¤ë”ì— ì•Œë§ì€ ê°’ì„ ì„¸íŒ…í•´ì£¼ëŠ” ê²ƒì´ë‹¤.

ì´ë•Œ ì™€ì¼ë“œì¹´ë“œì¸ `*`ì„ ì‚¬ìš©í•˜ì—¬ ì´ í—¤ë”ë¥¼ ì„¸íŒ…í•˜ê²Œ ë˜ë©´ ëª¨ë“  ì¶œì²˜ì—ì„œ ì˜¤ëŠ” ìš”ì²­ì„ ë°›ì•„ë¨¹ê² ë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ ë‹¹ì¥ì€ í¸í•  ìˆ˜ ìˆê² ì§€ë§Œ, ë°”ê¿”ì„œ ìƒê°í•˜ë©´ ì •ì²´ë„ ëª¨ë¥´ëŠ” ì´ìƒí•œ ì¶œì²˜ì—ì„œ ì˜¤ëŠ” ìš”ì²­ê¹Œì§€ ëª¨ë‘ ë°›ì•„ë¨¹ê² ë‹¤ëŠ” ì˜¤í”ˆ ë§ˆì¸ë“œì™€ ë‹¤ë¥¼ ê²ƒ ì—†ìœ¼ë¯€ë¡œ ë³´ì•ˆì ìœ¼ë¡œ ì‹¬ê°í•œ ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.

ê·¸ëŸ¬ë‹ˆ ê°€ê¸‰ì ì´ë©´ ê·€ì°®ë”ë¼ë„ `Access-Control-Allow-Origin: https://evan.github.io`ì™€ ê°™ì´ ì¶œì²˜ë¥¼ ëª…ì‹œí•´ì£¼ë„ë¡ í•˜ì.



### í”„ë¡ íŠ¸ í”„ë¡ì‹œ ì„œë²„ ì„¤ì •

ì•ì„œ CORSëŠ” `ë¸Œë¼ìš°ì €`ì— í¬í•¨ëœ ìŠ¤í™ì´ê¸° ë•Œë¬¸ì— ì„œë²„ë¼ë¦¬ í†µì‹ ì—ëŠ” ì‘ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  ì„¤ëª…í–ˆë‹¤.

ì´ë¥¼ ì´ìš©í•´ í”„ë¡ íŠ¸ ì„œë²„ë¥¼ ë§Œë“¤ê³  ë¸Œë¼ìš°ì €ëŠ” í”„ë¡ íŠ¸ì„œë²„ì™€ í†µì‹ í•˜ë„ë¡ í•œë‹¤.

`ë¸Œë¼ìš°ì € ì…ì¥ì—ì„œëŠ” í”„ë¡ íŠ¸ ì„œë²„ì™€ë§Œ í†µì‹ `í•˜ê¸°ë•Œë¬¸ì— `ë™ì¼ ì¶œì²˜ë¡œ íŒë‹¨`í•˜ê¸°ë•Œë¬¸ì— CORSê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

í•˜ì§€ë§Œ `í”„ë¡ íŠ¸ ì„œë²„ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ë°±ì—”ë“œ ì„œë²„ì™€ í†µì‹ `í•˜ë©° APIê°€ í•„ìš”í•œê²½ìš° ìš”ì²­í•´ì„œ ë°›ì•„ì˜¤ê²Œëœë‹¤.

ì¦‰, í”„ë¡ íŠ¸ ì„œë²„ì™€ ë°±ì—”ë“œ ì„œë²„ë¥¼ ë¶„ë¦¬í•´ì„œ ë¸Œë¼ìš°ì €ì˜ ì²˜ë¦¬ë¥¼ ëª¨ë‘ í”„ë¡ íŠ¸ì„œë²„ì—ê²Œ ìœ„ì„í•˜ê³  í”„ë¡ íŠ¸ì„œë²„ëŠ” í•„ìš”ì‹œ ë°±ì—”ë“œ ì„œë²„ì—ê²Œ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•´ ë°›ì•„ì˜¤ëŠ”ì‹ìœ¼ë¡œ ì„¤ê³„í•˜ë©´ CORS ë°œìƒì„ ë°©ì§€í• ìˆ˜ìˆë‹¤.

<img src="C:\Users\afrad\OneDrive\ë°”íƒ• í™”ë©´\ìƒˆ í´ë”\image-20220119194732352.png" alt="image-20220119194732352" style="zoom:50%;" />





## Reference

---

evan-moon.github.io/2020/05/21/about-cors/

[[10ë¶„ í…Œì½”í†¡\] ğŸŒ³ ë‚˜ë´„ì˜ CORS - YouTube](https://www.youtube.com/watch?v=-2TgkKYmJt4)







# [RestAPI] "ë‹¹ì‹ ì˜ RestAPI ì´ëŒ€ë¡œ ê´œì°®ì€ê°€?" ë¥¼ ë³´ê³ 

---































