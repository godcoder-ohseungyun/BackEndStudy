# TCP 연결관리

---

**1:1 소켓 연결**
 연결 설정 과정(handshaking) 필요
 서버 연결 소켓 : 서버 IP 주소와 서버 Port 번호 공유 가능
 멀티캐스팅(multicasting) 지원 불가

+ 소켓주소 = IP 주소 + PORT 번호

![image](https://user-images.githubusercontent.com/68331041/136798922-ec3f6a63-b137-4ecf-876b-6274b5e49c71.png)

소켓연결을 이용하여 전이중 통신이 가능하다.

![image](https://user-images.githubusercontent.com/68331041/136805267-97db8e85-f9ae-4ebd-b017-4f14d18c0d90.png)

TCP는 데이터 전송을 바이트 스트림 형태로 전송한다.

![image](https://user-images.githubusercontent.com/68331041/136805784-63874611-ebf8-421a-b09d-22c8d3d3a29c.png)

+ 데이터를 여러개의 세그먼트로 생성하여 전송
+ 위으 서버 응용 프로세스는 필요한만큼의 세그먼트를 수신버퍼에서 수신하여 활용한다.





![image](https://user-images.githubusercontent.com/68331041/136806152-a181b051-d8c4-45e8-85d5-1172e32e151b.png)

+ 1. **클라이언트: SYN세그먼트(싱크세그먼트)를 전송**

  > <img src="https://user-images.githubusercontent.com/68331041/136807025-16486040-d8e2-4f31-836d-b9ae89a37ea9.png" alt="image" style="zoom: 67%;" />
  >
  > + 순서번호 SN필드 순서번호 설정
  > + SYN 세그먼트는 데이터가 없지만 있는것처럼 가상 1바이트 데이터 보유

+ 2. **서버가 자원이 충분하면 연결수락 SYN + ACK 세그먼트 응답**

> <img src="https://user-images.githubusercontent.com/68331041/136807753-28e1d99a-a85a-41a4-a1e3-a857d350aef0.png" alt="image" style="zoom:67%;" />

+ 3. **클라이언트 ACK 세그먼트 응답**

  > <img src="https://user-images.githubusercontent.com/68331041/136807857-1f0f07a1-50d5-470d-bf70-6fe8bbd20bdc.png" alt="image" style="zoom:67%;" />

+ 4. 전이중통신 가능

  > 위 3단계 **3HAND SHAKE** **완료후 데이터 통신 가능**





![image](https://user-images.githubusercontent.com/68331041/136808582-693ef5b3-e337-4f7d-86ca-4acc1a849a49.png)

+ 연결 해제의 경우 4 핸드 셰이킹
+ 양쪽 연결 해제

