# IP 주소:구조와 할당

---

IP 주소 체계를 알아보기전에 먼저 인터넷에 대하여 몇가지 알아야한다.

![image](https://user-images.githubusercontent.com/68331041/143674053-1e901363-1f37-4f47-8a7b-fcf46bf2481e.png)

라우터로 연결된 수많은 네트워크 들의 집합을 **인터넷**이라고 칭한다.

> 이 각각의 네트워크들을 **서브넷**이라고 부른다. 서브넷은 유일한 ID를 가진다.

각 **호스트**는 서브넷에 연결되어잇는 말단 장치로 유일한 ID를 갖는다.

**라우팅 테이블**은 라우터에서 다음 라우터로 보내기 위핸 IP주소를 저장하는 테이블이다.

> 라우팅 테이블에는 자신이 책임지는 다음 라우터의 IP만을 저장한다.
>
> 모든 경로의 IP를 가지고있다면 라우팅 테이블의 크기는 기하급수적으로 커질것이다.
>
> 이를 방지하기 위해 자신의 책임구간만 저장한다.



### IP주소

**인터넷에서 통신 장치를 유일하게 식별**
= Network ID + Host ID



기존의 주소체계 IPv4는 32bit이다. 부족문제 해결을 위해 IPv6 128bit가 나왔지만

아직까진 IPv4를 아껴써야한다.

> 공유기를 사용한다.



### IPv4 구조

네트워크 식별자 ID는 고유한 고정값을 가지고 호스트 식별자 ID부분을 이용해 각 네트워크에 연결된 호스트에 고유한 ID를 부여한다.

> 네트워크 식별자로 네트워크를 찾아가서 호스트 식별자로 그 네트워크 내에 있는 호스트 들 중 응답할 호스트를 찾는다.
>
> 네트워크 식별자는 아파트주소 호스트 식별자는 동,호 수 라고 생각하면 된다.

![image](https://user-images.githubusercontent.com/68331041/143674341-7363b710-15ff-426a-86a8-a5fd66b9a738.png)

ex) HOST1 : 198.10.**0.1**       HOST2: 198.10.**0.2**

> 198.10 은 네트워크 식별자로 고유한 고정값 
>
> 0.1~ 은 호스트 식별자로 호스트마다 고유의 값을 지정한다.



꼭 8 바이트 8바이트로 나눌필요은 없다. 이걸 어떻게 분할하냐에따라 클래스 주소 ,비클래스 주소가 있다.



**클래스 IP 주소**

> 네트워크 식별자와 호스트 식별자에게 몇 바이트를 할당하냐에 따라 다양하다.
>
> IP 주소는 선택한 클래스에 따라 정해진 바이트로 구조가 분할된다.
>
> > Class A 구조: **198**.10.0.1
> >
> > Class B 구조: **198.10**.0.1
> >
> > Class C 구조: **198.10.0**.1
> >
> > 진한 부분이 네트워크 식별자에게 할당된 바이트 수이다.
>
> ![image](https://user-images.githubusercontent.com/68331041/143674573-163e2b6c-8057-42a0-9832-ab3f338e6558.png)
>
> 하지만 문제가 있다. 
>
> 호스트를 10대만 연결할거라고 생각하고 Class C구조를 사용해 호스트 아이디를 1바이트만 할당한다면 각 호스트에게 최대 (2^8)-2 개의 고유 id를 만들수있다.
>
> > 즉, 최대 254개의 호스트가 연결될수있다.
> >
> > > 네트워크 주소 와 브로드케스트 주소 2개를 제외 해서 254개가 된다.
>
> 그런데 호스트를 확장하는 경우가 생겼다고 해보자. 
>
> 이미 정해진 IP 구조를 다 바꿔야하는 문제가 생기고 혹은 1대만 연결했을경우 남은 IP 주소는 낭비된다.



**그래서 지금은 비클래스 IP 주소를 사용한다.**



**비클래스 IP 주소**

클래스 IP주소처럼 이미 정해진 규격으로 IP주소를 설계하지않고 그때 그때 결정하여 IP 주소를 할당할수있다.

단, **서브넷 마스크**를 표시해 네트워크 식별자에게 할당된 바이트를 표기해주어야 어디까지가 네트워크 식별자고 어디서부터가 호스트 식별자인지 알수있다.

> 먼저, 네트워크 식별자를 **프리픽스**라고 한다는걸 알아두자



**서브넷마스크 표기법**

> 바이트가 아닌 비트로 표시한다.

프리픽스 표기법 : /prefix_size 표시

이진 표기법 : 프리픽스 비트를 모두 1로 표시

 DDN 표기법 : 이진 서브넷마스크를 DDN으로 표시



**서브넷마스크 표기 예제**

프리픽스(prefix) 서브넷마스크 : **/24**

> 24bit = 3byte
>
> 네트워크 식별자에게 3바이트 할당됨을 알수있다.

이진 서브넷마스크 : **11111111 11111111 11111111** 00000000

> 네트워크 식별자에게 3바이트 할당됨을 알수있다.

DDN 서브넷마스크 : **255.255.255**.0

> 네트워크 식별자에게 3바이트 할당됨을 알수있다.



### 특수 주소

브로드캐스트 주소 : 호스트 ID의 모든 비트 1
네트워크 주소 : 호스트 ID의 모든 비트 0

네트워크 주소 : 200.100.11.**0**/24
브로드캐스트 주소 : 200.100.11.**255**/24

호스트 주소는 200.100.11.1~200.100.11.254 사이를 갖게된다.

<img src="https://user-images.githubusercontent.com/68331041/143675739-50b76ddc-864a-45fb-b6dc-f6cbd84b39bf.png" alt="image" style="zoom: 50%;" />

