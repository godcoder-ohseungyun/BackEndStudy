# AOP,SOA,MSA

---



# AOP

---

**개요**

회원 가입하는데 소요되는 시간을 측정하고 싶다.

<img src="https://user-images.githubusercontent.com/68331041/146516632-711f532d-c7f7-4055-bad6-fdda4f406295.png" alt="image" style="zoom:50%;" />

Controller에 join 메서드에 다음과같은 시간 측정 로직을 포함하였다.

그런데 사실 핵심로직 부분은 표시된 부분 뿐이다.

회원가입을 수행하는 핵심로직 이외에 시간 측정 로직이라는 부가로직이 추가되었다.

사실 해당 메서드는 핵심로직만 수행하면 된다.

> 부가 로직의 무분별한 추가는 SRP,OCP 등에 위반한다.



이렇게 핵심로직이 아닌 시간측정,트랜잭션,권한책크 등 **부가적인 로직을 인프라 로직**이라고 칭한다.

> 인프라 로직이란?
>
> 인프라 로직은 부가기능으로 애플리케이션 전 영역에서 발생한다.
>
> 따라서 중복코드가 발생하기 쉽고 유지보수가 힘들어진다.
>
> 핵심 로직과 함께 있는경우 핵심로직을 파악하기 힘들어진다.



어떤 프로그램에 다음과 같은 비즈니스 로직이 있다.

~~~
로그인 기능
글 작성 기능
글 삭제 기능
~~~

<img src="https://user-images.githubusercontent.com/68331041/146513988-ef76af7e-5eda-4731-ba51-a0c905855015.png" alt="image" style="zoom:50%;" />

각 비즈니스 로직은 이와 같은 인프라 로직들을 필요로한다.



이 인프라 로직은 횡단으로 묶이기 때문에 **횡단 관심사**로 분류된다.

<img src="https://user-images.githubusercontent.com/68331041/146514303-e7677fb4-06d7-4246-841f-9cd99b2f7080.png" alt="image" style="zoom:50%;" />



## AOP!

Aspect-Oriented Programming(관점 지향 프로그래밍)는 여기서 등장한다. 

Cross-cutting Concern(황단 관심사)를 이용하여 **핵심 관심사와 공통 관심사를 ''분리''**하여 프로그램의 모듈성을 증가시키는 프로그래밍 기법이다.

핵심 관심사에는 비지니스 로직이 해당되며, 

해당 **비지니스 로직의 영향 혹은 수정 없이**, 여러 모듈에서 사용할 수 있는 **공통 로직을 적용**하는 방법이다.

> AOP를 적용하면 핵심로직과 인프라 로직을 **별도로 코딩**할수있어 모듈성이 증가한다.
>
> AOP를 적용하면 여전히 **핵심로직에 집중**하며 인프라 로직도 추가할수있다.
>
> 해당 인프라 로직이 어떤 핵심로직에 적용되는지 **한눈에 파악**할수있다.



#### 스프링 필터, 인터셉터도 AOP의 일종이다.



### OOP와 AOP

AOP는 OOP를 보완하여 더욱 객체지향으로 설계할수있도록한다.



**AOP 용어**

+ 아래와 같은 용어들 외에도 아주 많다.

Target

> 부가 기능이 부여되는 대상
>
> 어떤 대상에 부가기능을 부여할 것인가

Advice

> 부여할 부가 기능
>
> 어떤 부가기능을 부여할 것인가
>
> > Before,AfterThrowing,After 등
> >
> > > 메서드 실행전, 익셉션 발생 후, 실행 후

Join point

> 어디에 적용할 것인가
>
> > **메서드**,필드,객체,생성자 등 (스프링에선 메서드에만 적용)

Point cut

> 실제 advice가 적용될 지점을 선정





## Reference

---

https://www.youtube.com/watch?v=Hm0w_9ngDpM

https://kingjakeu.github.io/springboot/2021/02/02/spring-aop/











