

## WebServer , WAS

----

**서버는 여러가지 의미를 가진다.**

> 1. 서버는 컴퓨터이다. 물리적인 기계,하드웨어
> 2. 같은 컴퓨터에서도 서비스를 해주느냐 제공받느냐에 따라 서버라고 부르기도 한다.
> 3. 어떤 컴퓨터로 하여금 서버 역할을 하도록 하는 소프트웨어를 서버라고 하기도 한다.



### 웹 서버와 웹 애플리케이션 서버의 차이점

**웹 서버**

<img src="https://user-images.githubusercontent.com/68331041/141705717-6210c4fa-c80d-47bd-a1a0-ef22708101df.png" alt="image" style="zoom:67%;" />

+ 주로 정적 리소스를 제공해 준다.
+ 웹 사이트를 위한 서버로 **아파치,NginX**라는 프로그램(소프트웨어)들이 대표적이다.



**웹 애플리케이션 서버**(WAS)

<img src="https://user-images.githubusercontent.com/68331041/141705730-23216f16-9bd8-49c1-99ff-9f31217a0b18.png" alt="image" style="zoom:67%;" />

+ WAS라고 불리며 단순히 리소스를 제공하기만 하는게 아니라 
+ 프로그램 코드를 이용해 로직을 수행하며 전문적으로 동적 HTML과 HTTP API(JSON)를 클라이언트에게 제공해준다.
+ 대표적으로 **톰캣**이 있다.
+ Spring boot는 톰캣를 내장하고있다.



최근엔 둘의 경계가 모호하다.

웹 서버도 WAS의 기능을 할수있고 WAS도 웹 서버의 기능을 할수있다.

> 정적 동적 처리가 다 가능하다.

단, 웹 서버는 정적 리소스를 제공하고 WAS는 애플리케이션 로직을 실행하는데 특화 되어있다고 생각하면 된다.



### 왜 웹 서버(아파치)와 WAS(톰캣)를 연동해서 사용하는지 ?

예를들어 WAS만 사용한다면 너무 많은 역할 담당,과부화,서버 다운의 문제가 발생한다.

![image](https://user-images.githubusercontent.com/68331041/141706142-2c926d85-7bff-4df5-84a3-10d968a0a49d.png)

+ 전단에 웹 서버를 위치 시키고 후단에 WAS를 위치시켜 사용한다.

![image](https://user-images.githubusercontent.com/68331041/141706120-e8adf1a1-0e33-404d-a600-c1dd4a420f7c.png)

+ 정적 리소스는 웹서버에게 애플리케이션 로직 처리는 WAS에게 전담시킨다.

![image](https://user-images.githubusercontent.com/68331041/141706123-44dde4ec-c6da-4216-8e85-f235a9f1593e.png)

+ 효율적인 리소스 관리
+ 정적 리소스가 많이 사용되면 Web 서버 증설
+ 애플리케이션 리소스가 많이 사용되면 WAS 증설필요에 따라 
+ reverse proxy의 기능을 사용할수있다.

> 서버는 보안상 내부 로직,리소스 위치를 드러내지 않아야 한다.
>
> WAS가 로직을 처리하면 웹 서버(아파치)가 프록시의 역할을 한다. 클라이언트와 WAS 사이에서 데이터를 주고 받아준다. 

+ road balancing의 기능을 사용할수있다.

> 웹 기능이 커지고 WAS 서버가 추가 증설된 경우
>
> 웹 서버는 클라이언트의 여러 요청을 여러 WAS에게 나눠주는 역할을한다.
>
> 성능 측면에서 뛰어나다.

+ 웹 서버는 WAS서버가 잘돌고있는지 검토하는 역할도 한다.

  > WAS 서버는 무겁고 복잡한 로직을 수행하기때문에 서버가 잘 죽는 단점이있다. 



### 정리

웹 서버와 WAS는 기능적으로 겹치는 부분이 많지만 보안이랑 운영에 뛰어난 웹 서버가 직접 클라이언트를 응대하고 WAS는 후단에서 동적 로직을 처리하는데 집중하는 것이다.



+ 아파치 와 NginX차이

> 아파치는 멀티쓰레드로 동작
>
> > 컨텍스트 스위칭 비용 발생
>
> NginX는 싱글쓰레드 비동기로 동작
>
> > 큰 규모의 요청에서 불리



## Reference

---

https://www.youtube.com/watch?v=Zimhvf2B7Es