# 이메일과 SMTP

---

![image](https://user-images.githubusercontent.com/68331041/133955115-139d606e-e6bd-42d7-a80b-32096e826bed.png)

#### **이메일 전송 과정**

> ① 송신자 UserAgent 에서 메일 작성 후 메일 서버로 전달(**SMTP**)
> ② 송신자 **메일 서버**의 출력 메시지 **큐**(outgoing message queue)에 저장
> ③ **수신자 메일 서버**로 전송(**SMTP**)
>
> ④ 전송 불가시 **30분 단위로 재전송 시도**, 정해진 **기간 동안 전송 불가시 중단** 및 송신자에게 통보
> ⑤ 수신자 메일 서버의 수신자 **메일박스(mailbox)에 저장**
>
> ⑥ 수신자 UserAgent 에서 메일 서버의 메일박스의 메일 읽기 및 관리 (**NO** SMTP)



이메일 전송프로토콜은 **SMTP**이나 웹 이메일의 경우 **HTTP**를 쓰기도 한다.



**SMTP**

> **클라이언트-서버 프로토콜**
>
> > 클라이언트 : 송신 메일 서버/UA
> > 서버 : 수신 서버 메일/송신 메일 서버
>
> + 송신자 UserAgent  가 Mail Server로 보낼때 SMTP사용
>
>   송신 Mail Server 가 수신 Mail Server로 보낼때 SMTP사용
>
>   수신자 UserAgent 가 Mail Server에서 메일을 읽어드릴때는 SMTP사용이 **아니라** 그냥 읽어감
>
>   
>
> **TCP 사용**
>
> >  신뢰 전송
> > 서버 포트번호 : 25
>
> <img src="https://user-images.githubusercontent.com/68331041/133955744-829e5238-5dd0-4c7f-96bd-049098774c43.png" alt="image" style="zoom:50%;" />
>
> **ASCII 텍스트 프로토콜**
>
> > 명령어 : ASCII 그래픽문자 + 제어문자
> > 메시지 : ASCII 그래픽문자 + 제어문자

**HTTP**

+ Pull Protocol //요청하여 서버로부터 정보를 받아오는 프로토콜
+ Push Protocol 도 가능

**SMTP**

+ Push Protocol //서버로 정보를 보내서 저장하는 프로토콜
+ 메일 특화 프로토콜로 간단하게 멀티전송에 탁월하다.



![image](https://user-images.githubusercontent.com/68331041/133956409-e27cec9c-b410-43d8-8d36-ce7a491d4373.png)

송수신 메일서버는 **항상 가동중**   수신자 UA는 **필요할때만 가동**됨으로 수신자 메일 서버에서 **Push Protocol 을사용할수가 없다**. 따라서 Pull Protocol 을 사용한다.





